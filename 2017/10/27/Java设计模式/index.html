<!DOCTYPE html>
<html lang="zh">
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.4 -->

    <!-- Title -->
    
    <title>
        
            Java设计模式 | 
        
        梦醒花开知多少
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
        <link rel="dns-prefetch" href="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"/>
    
    
    
    
    
        <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="你的名字。">
    <meta name="description" content="技术生活个人博客">
    <meta name="keywords" content="null,Java,设计模式">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/柠檬.png">
    <link rel="icon" sizes="192x192" href="/img/柠檬.png">
    <link rel="apple-touch-icon" href="/img/柠檬.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="梦醒花开知多少">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://www.sayyourname.cn">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Java设计模式 | 梦醒花开知多少">
    <meta property="og:description" content="技术生活个人博客">
    <meta property="og:article:tag" content="Java"> <meta property="og:article:tag" content="设计模式"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: SourceHanSansCN-Light, Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: rgba(0,0,0,.44);
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #30BCED !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #30BCED !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #30BCED !important;
  }

  .toTop {
    background: #30BCED !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #30BCED;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #30BCED;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #30BCED;
  }

  .post-toc a:hover {
    color: rgba(0,0,0,.44);
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #FFFFFF;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
        <script>
                (function(){
                    var bp = document.createElement('script');
                    var curProtocol = window.location.protocol.split(':')[0];
                    if (curProtocol === 'https') {
                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                    }
                    else {
                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                    }
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                })();
            </script>
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建型模式"><span class="post-toc-number">1.</span> <span class="post-toc-text">创建型模式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#简单工厂模式"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">简单工厂模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#工厂模式"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">工厂模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#抽象工厂模式"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">抽象工厂模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#单例模式"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">单例模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#建造者模式"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">建造者模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原型模式"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">原型模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建型模式总结"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">创建型模式总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#结构型模式"><span class="post-toc-number">2.</span> <span class="post-toc-text">结构型模式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#代理模式"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">代理模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#适配器模式"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">适配器模式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#默认适配器模式"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">默认适配器模式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#对象适配器模式"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">对象适配器模式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#类适配器模式"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">类适配器模式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#适配器模式总结"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">适配器模式总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#桥梁模式"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">桥梁模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#装饰模式"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">装饰模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#门面模式"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">门面模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#组合模式"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">组合模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#享元模式"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">享元模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#结构型模式总结"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">结构型模式总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#行为型模式"><span class="post-toc-number">3.</span> <span class="post-toc-text">行为型模式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#策略模式"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">策略模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#观察者模式"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">观察者模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#责任链模式"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">责任链模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#模板方法模式"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">模板方法模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#状态模式"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">状态模式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#行为型模式总结"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">行为型模式总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#总结"><span class="post-toc-number">4.</span> <span class="post-toc-text">总结</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 130);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Java设计模式
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="http://photo-static-cdn.ufoto.com.cn/upload/tiny/2495052/17ab1ad9-568a-42a2-a61b-3960a348da2d.JPG" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>你的名字。</strong>
        <span>10月 27, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAACzklEQVR42u3aQW7DMAwEwPz/0+21QFFnl3LQRBqdAtuxNbwQJPX4OnI9sLGxsbGxsbGxsd+S/YjXz+eLj/16/q935m9u94yNjY19Ajvf+l+Mld/X2032EIUbGxsb+wB2krTyZ/IgXqe0JNBJosXGxsbGvi4JksIjSV05FRsbGxv7ruSUXEkCkb8TGxsbG3ulqXRXQXKdCNv9vLyXho2Njf327Nmg939//9t8GxsbG/vN2LM1G83OGkxfNy1sbGzsXdlJmZG371fCMStXivEwNjY29qbs65FtOyS4d7SQj5yTlhM2Njb2rux2gNpusT1qORtORAHFxsbG3pTdlgezg5JtMZOkq/xIKDY2NvYJ7PzzKwdx8lDm5UpxBRsbG3tTdj5YbRPPeiLMgxI1m7CxsbE3ZbdNnHZb7ZPteKAIHzY2NvYB7OSIZNIqmpUfSXOqbVRhY2Njn8bOy4822czKmHwkEN3FxsbG3po9OwSTDwxm7aq7Uhc2Njb23uz1Rk873F0pOdrUiI2NjX0Cu/7zaEDbfitvV+VHi7CxsbHPYc9GrXcB8tFCklCxsbGxz2GvrxaWp8a27BmeVMLGxsb+cHbbuMkB+dggCUTeisLGxsY+h10fYVwoD2aD5CQodQLDxsbG3ojdAvLQtMnprhJl2FTCxsbG/lh2O4h93d3ZfrCxsbGx8xSynvbuamYNm1DY2NjYW7PzxlBbosyu5E3/4ivY2NjYB7CTlLY+DG4DmrSWojSMjY2NvSm7XUkxcB2UPC21Se7Jk9jY2NibsttkMCsPkgHtekCxsbGxT2avt/5nh2mSgiQP1lJTCRsbG3sL9isaSbO7s0bSkxBjY2NjYy8PhvOkOBsnPylmsLGxsbFHTfkWnwx9r4sWbGxs7JPZr9tuDsj3liczbGxs7BPY64PelSM1s/fUX8HGxsbelH3OwsbGxsbGxsbGxn6b9Q1IY15gEP6LPgAAAABJRU5ErkJggg==">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Java/">Java</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/设计模式/">设计模式</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/2017/10/27/Java设计模式/" class="leancloud-views_num" data-flag-title="Java设计模式">
     &nbsp;浏览量
</span>

            </li>
        </a>
    

    
        
    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">

  

    
        <p>设计模式是对大家实际工作中写的各种代码进行高层次抽象的总结，其中最出名的当属 <em>Gang of Four</em> (<em>GoF</em>) 的分类了，他们将设计模式分类为 23 种经典的模式，根据用途我们又可以分为三大类，分别为创建型模式、结构型模式和行为型模式。</p>
<p>有一些重要的设计原则在开篇和大家分享下，这些原则将贯通全文：</p>
<ol>
<li>面向接口编程，而不是面向实现。这个很重要，也是优雅的、可扩展的代码的第一步，这就不需要多说了吧。</li>
<li>职责单一原则。每个类都应该只有一个单一的功能，并且该功能应该由这个类完全封装起来。</li>
<li>对修改关闭，对扩展开放。对修改关闭是说，我们辛辛苦苦加班写出来的代码，该实现的功能和该修复的 bug 都完成了，别人可不能说改就改；对扩展开放就比较好理解了，也就是说在我们写好的代码基础上，很容易实现扩展。</li>
</ol>
<h2 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h2><p>创建型模式的作用就是创建对象，说到创建一个对象，最熟悉的就是 new 一个对象，然后 set 相关属性。但是，在很多场景下，我们需要给客户端提供更加友好的创建对象的方式，尤其是那种我们定义了类，但是需要提供给其他开发者用的时候。</p>
<h3 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h3><p>和名字一样简单，非常简单，直接上代码吧：</p>
<pre><code>public class FoodFactory {

    public static Food makeFood(String name) {
        if (name.equals(&quot;noodle&quot;)) {
            Food noodle = new LanZhouNoodle();
            noodle.addSpicy(&quot;more&quot;);
            return noodle;
        } else if (name.equals(&quot;chicken&quot;)) {
            Food chicken = new HuangMenChicken();
            chicken.addCondiment(&quot;potato&quot;);
            return chicken;
        } else {
            return null;
        }
    }
}
</code></pre><p><em>其中，LanZhouNoodle 和 HuangMenChicken 都继承自 Food。</em></p>
<p>简单地说，简单工厂模式通常就是这样，一个工厂类 XxxFactory，里面有一个静态方法，根据我们不同的参数，返回不同的派生自同一个父类（或实现同一接口）的实例对象。</p>
<blockquote>
<p>我们强调<strong>职责单一</strong>原则，一个类只提供一种功能，FoodFactory 的功能就是只要负责生产各种 Food。</p>
</blockquote>
<h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><p>简单工厂模式很简单，如果它能满足我们的需要，我觉得就不要折腾了。之所以需要引入工厂模式，是因为我们往往需要使用两个或两个以上的工厂。</p>
<pre><code>public interface FoodFactory {
    Food makeFood(String name);
}
public class ChineseFoodFactory implements FoodFactory {

    @Override
    public Food makeFood(String name) {
        if (name.equals(&quot;A&quot;)) {
            return new ChineseFoodA();
        } else if (name.equals(&quot;B&quot;)) {
            return new ChineseFoodB();
        } else {
            return null;
        }
    }
}
public class AmericanFoodFactory implements FoodFactory {

    @Override
    public Food makeFood(String name) {
        if (name.equals(&quot;A&quot;)) {
            return new AmericanFoodA();
        } else if (name.equals(&quot;B&quot;)) {
            return new AmericanFoodB();
        } else {
            return null;
        }
    }
}
</code></pre><p>其中，ChineseFoodA、ChineseFoodB、AmericanFoodA、AmericanFoodB 都派生自 Food。</p>
<p>客户端调用：</p>
<pre><code>public class APP {
    public static void main(String[] args) {
        // 先选择一个具体的工厂
        FoodFactory factory = new ChineseFoodFactory();
        // 由第一步的工厂产生具体的对象，不同的工厂造出不一样的对象
        Food food = factory.makeFood(&quot;A&quot;);
    }
}
</code></pre><p>虽然都是调用 makeFood(“A”) 制作 A 类食物，但是，不同的工厂生产出来的完全不一样。</p>
<p>第一步，我们需要选取合适的工厂，然后第二步基本上和简单工厂一样。</p>
<p><strong>核心在于，我们需要在第一步选好我们需要的工厂</strong>。比如，我们有 LogFactory 接口，实现类有 FileLogFactory 和 KafkaLogFactory，分别对应将日志写入文件和写入 Kafka 中，显然，我们客户端第一步就需要决定到底要实例化 FileLogFactory 还是 KafkaLogFactory，这将决定之后的所有的操作。</p>
<p>虽然简单，不过我也把所有的构件都画到一张图上，这样读者看着比较清晰：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/factory-1.png" alt="factory-1"></p>
<h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><p>当涉及到<strong>产品族</strong>的时候，就需要引入抽象工厂模式了。</p>
<p>一个经典的例子是造一台电脑。我们先不引入抽象工厂模式，看看怎么实现。</p>
<p>因为电脑是由许多的构件组成的，我们将 CPU 和主板进行抽象，然后 CPU 由 CPUFactory 生产，主板由 MainBoardFactory 生产，然后，我们再将 CPU 和主板搭配起来组合在一起，如下图：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/abstract-factory-1.png" alt="factory-1"></p>
<p>这个时候的客户端调用是这样的：</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 得到 Intel 的 CPU</span>
CPUFactory cpuFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntelCPUFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
CPU cpu <span class="token operator">=</span> intelCPUFactory<span class="token punctuation">.</span><span class="token function">makeCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 得到 AMD 的主板</span>
MainBoardFactory mainBoardFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmdMainBoardFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MainBoard mainBoard <span class="token operator">=</span> mainBoardFactory<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 组装 CPU 和主板</span>
Computer computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span>cpu<span class="token punctuation">,</span> mainBoard<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>单独看 CPU 工厂和主板工厂，它们分别是前面我们说的<strong>工厂模式</strong>。这种方式也容易扩展，因为要给电脑加硬盘的话，只需要加一个 HardDiskFactory 和相应的实现即可，不需要修改现有的工厂。</p>
<p>但是，这种方式有一个问题，那就是如果 <strong>Intel 家产的 CPU 和 AMD 产的主板不能兼容使用</strong>，那么这代码就容易出错，因为客户端并不知道它们不兼容，也就会错误地出现随意组合。</p>
<p>下面就是我们要说的<strong>产品族</strong>的概念，它代表了组成某个产品的一系列附件的集合：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/abstract-factory-2.png" alt="abstract-factory-2"></p>
<p>当涉及到这种产品族的问题的时候，就需要抽象工厂模式来支持了。我们不再定义 CPU 工厂、主板工厂、硬盘工厂、显示屏工厂等等，我们直接定义电脑工厂，每个电脑工厂负责生产所有的设备，这样能保证肯定不存在兼容问题。</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/abstract-factory-3.png" alt="abstract-factory-3"></p>
<p>这个时候，对于客户端来说，不再需要单独挑选 CPU厂商、主板厂商、硬盘厂商等，直接选择一家品牌工厂，品牌工厂会负责生产所有的东西，而且能保证肯定是兼容可用的。</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 第一步就要选定一个“大厂”</span>
    ComputerFactory cf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmdFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// 从这个大厂造 CPU</span>
    CPU cpu <span class="token operator">=</span> cf<span class="token punctuation">.</span><span class="token function">makeCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// 从这个大厂造主板</span>
    MainBoard board <span class="token operator">=</span> cf<span class="token punctuation">.</span><span class="token function">makeMainBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">// 从这个大厂造硬盘</span>
      HardDisk hardDisk <span class="token operator">=</span> cf<span class="token punctuation">.</span><span class="token function">makeHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 将同一个厂子出来的 CPU、主板、硬盘组装在一起</span>
    Computer result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span>cpu<span class="token punctuation">,</span> board<span class="token punctuation">,</span> hardDisk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>当然，抽象工厂的问题也是显而易见的，比如我们要加个显示器，就需要修改所有的工厂，给所有的工厂都加上制造显示器的方法。这有点违反了<strong>对修改关闭，对扩展开放</strong>这个设计原则。</p>
<h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><p>单例模式用得最多，错得最多。</p>
<p>饿汉模式最简单：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 首先，将 new Singleton() 堵死</span>
    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// 创建私有静态实例，意味着这个类第一次使用的时候就会进行创建</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// 瞎写一个静态方法。这里想说的是，如果我们只是要调用 Singleton.getDate(...)，</span>
    <span class="token comment" spellcheck="true">// 本来是不想要生成 Singleton 实例的，不过没办法，已经生成了</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> Date <span class="token function">getDate</span><span class="token punctuation">(</span>String mode<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>很多人都能说出饿汉模式的缺点，可是我觉得生产过程中，很少碰到这种情况：你定义了一个单例的类，不需要其实例，可是你却把一个或几个你会用到的静态方法塞到这个类中。</p>
</blockquote>
<p>饱汉模式最容易出错：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 首先，也是先堵死 new Singleton() 这条路</span>
    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// 和饿汉模式相比，这边不需要先实例化出来，注意这里的 volatile，它是必须的</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> Singleton instance <span class="token operator">=</span> null<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// 加锁</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">// 这一次判断也是必须的，不然会有并发问题</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>双重加锁，volatile 保证了线程间的可见性，synchronized 对可能的并发问题做同步</p>
<p>很多人不知道怎么写，直接就在 getInstance() 方法签名上加上 synchronized，这就不多说了。</p>
</blockquote>
<p>嵌套类最经典，以后大家就用它吧：</p>
<pre><code>public class Singleton3 {

    private Singleton3() {}
    // 主要是使用了 嵌套类可以访问外部类的静态属性和静态方法 的特性
    private static class Holder {
        private static Singleton3 instance = new Singleton3();
    }
    public static Singleton3 getInstance() {
        return Holder.instance;
    }
}
</code></pre><blockquote>
<p>注意，很多人都会把这个<strong>嵌套类</strong>说成是<strong>静态内部类</strong>，严格地说，内部类和嵌套类是不一样的，它们能访问的外部类权限也是不一样的。</p>
</blockquote>
<p>最后，一定有人跳出来说用枚举实现单例，是的没错，枚举类很特殊，它在类加载的时候会初始化里面的所有的实例，而且 JVM 保证了它们不会再被实例化，所以它天生就是单例的。不说了，读者自己看着办吧，不建议使用。</p>
<h3 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h3><p>经常碰见的 XxxBuilder 的类，通常都是建造者模式的产物。建造者模式其实有很多的变种，但是对于客户端来说，我们的使用通常都是一个模式的：</p>
<pre><code>Food food = new FoodBuilder().a().b().c().build();
Food food = Food.builder().a().b().c().build();
</code></pre><p>套路就是先 new 一个 Builder，然后可以链式地调用一堆方法，最后再调用一次 build() 方法，我们需要的对象就有了。</p>
<p>来一个中规中矩的建造者模式：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 下面是“一堆”的属性</span>
    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String nickName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 构造方法私有化，不然客户端就会直接调用构造方法了</span>
    <span class="token keyword">private</span> <span class="token function">User</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> String password<span class="token punctuation">,</span> String nickName<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nickName <span class="token operator">=</span> nickName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// 静态方法，用于生成一个 Builder，这个不一定要有，不过写这个方法是一个很好的习惯，</span>
    <span class="token comment" spellcheck="true">// 有些代码要求别人写 new User.UserBuilder().a()...build() 看上去就没那么好</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> UserBuilder <span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UserBuilder</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 下面是和 User 一模一样的一堆属性</span>
        <span class="token keyword">private</span> String  name<span class="token punctuation">;</span>
        <span class="token keyword">private</span> String password<span class="token punctuation">;</span>
        <span class="token keyword">private</span> String nickName<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token function">UserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// 链式调用设置各个属性值，返回 this，即 UserBuilder</span>
        <span class="token keyword">public</span> UserBuilder <span class="token function">name</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> UserBuilder <span class="token function">password</span><span class="token punctuation">(</span>String password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> UserBuilder <span class="token function">nickName</span><span class="token punctuation">(</span>String nickName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nickName <span class="token operator">=</span> nickName<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> UserBuilder <span class="token function">age</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// build() 方法负责将 UserBuilder 中设置好的属性“复制”到 User 中。</span>
        <span class="token comment" spellcheck="true">// 当然，可以在 “复制” 之前做点检验</span>
        <span class="token keyword">public</span> User <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">==</span> null <span class="token operator">||</span> password <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"用户名和密码必填"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>age <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> age <span class="token operator">>=</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"年龄不合法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment" spellcheck="true">// 还可以做赋予”默认值“的功能</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>nickName <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                nickName <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> password<span class="token punctuation">,</span> nickName<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>核心是：先把所有的属性都设置给 Builder，然后 build() 方法的时候，将这些属性<strong>复制</strong>给实际产生的对象。</p>
<p>看看客户端的调用：</p>
<pre><code>public class APP {
    public static void main(String[] args) {
        User d = User.builder()
                .name(&quot;foo&quot;)
                .password(&quot;pAss12345&quot;)
                .age(25)
                .build();
    }
}
</code></pre><p>说实话，建造者模式的<strong>链式</strong>写法很吸引人，但是，多写了很多“无用”的 builder 的代码，感觉这个模式没什么用。不过，当属性很多，而且有些必填，有些选填的时候，这个模式会使代码清晰很多。我们可以在 <strong>Builder 的构造方法</strong>中强制让调用者提供必填字段，还有，在 build() 方法中校验各个参数比在 User 的构造方法中校验，代码要优雅一些。</p>
<blockquote>
<p>题外话，强烈建议读者使用 lombok，用了 lombok 以后，上面的一大堆代码会变成如下这样:</p>
</blockquote>
<pre><code>@Builder
class User {
    private String  name;
    private String password;
    private String nickName;
    private int age;
}
</code></pre><blockquote>
<p>怎么样，省下来的时间是不是又可以干点别的了。</p>
</blockquote>
<p>当然，如果你只是想要链式写法，不想要建造者模式，有个很简单的办法，User 的 getter 方法不变，所有的 setter 方法都让其 <strong>return this</strong> 就可以了，然后就可以像下面这样调用：</p>
<pre><code>User user = new User().setName(&quot;&quot;).setPassword(&quot;&quot;).setAge(20);
</code></pre><h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><p>这是我要说的创建型模式的最后一个设计模式了。</p>
<p>原型模式很简单：有一个原型<strong>实例</strong>，基于这个原型实例产生新的实例，也就是“克隆”了。</p>
<p>Object 类中有一个 clone() 方法，它用于生成一个新的对象，当然，如果我们要调用这个方法，java 要求我们的类必须先<strong>实现 Cloneable 接口</strong>，此接口没有定义任何方法，但是不这么做的话，在 clone() 的时候，会抛出 CloneNotSupportedException 异常。</p>
<pre><code>protected native Object clone() throws CloneNotSupportedException;
</code></pre><blockquote>
<p>java 的克隆是浅克隆，碰到对象引用的时候，克隆出来的对象和原对象中的引用将指向同一个对象。通常实现深克隆的方法是将对象进行序列化，然后再进行反序列化。</p>
</blockquote>
<p>原型模式了解到这里我觉得就够了，各种变着法子说这种代码或那种代码是原型模式，没什么意义。</p>
<h3 id="创建型模式总结"><a href="#创建型模式总结" class="headerlink" title="创建型模式总结"></a>创建型模式总结</h3><p>创建型模式总体上比较简单，它们的作用就是为了产生实例对象，算是各种工作的第一步了，因为我们写的是<strong>面向对象</strong>的代码，所以我们第一步当然是需要创建一个对象了。</p>
<p>简单工厂模式最简单；工厂模式在简单工厂模式的基础上增加了选择工厂的维度，需要第一步选择合适的工厂；抽象工厂模式有产品族的概念，如果各个产品是存在兼容性问题的，就要用抽象工厂模式。单例模式就不说了，为了保证全局使用的是同一对象，一方面是安全性考虑，一方面是为了节省资源；建造者模式专门对付属性很多的那种类，为了让代码更优美；原型模式用得最少，了解和 Object 类中的 clone() 方法相关的知识即可。</p>
<h2 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h2><p>前面创建型模式介绍了创建对象的一些设计模式，这节介绍的结构型模式旨在通过改变代码结构来达到解耦的目的，使得我们的代码容易维护和扩展。</p>
<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><p>第一个要介绍的代理模式是最常使用的模式之一了，用一个代理来隐藏具体实现类的实现细节，通常还用于在真实的实现的前后添加一部分逻辑。</p>
<p>既然说是<strong>代理</strong>，那就要对客户端隐藏真实实现，由代理来负责客户端的所有请求。当然，代理只是个代理，它不会完成实际的业务逻辑，而是一层皮而已，但是对于客户端来说，它必须表现得就是客户端需要的真实实现。</p>
<blockquote>
<p>理解<strong>代理</strong>这个词，这个模式其实就简单了。</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FoodService</span> <span class="token punctuation">{</span>
    Food <span class="token function">makeChicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Food <span class="token function">makeNoodle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FoodServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">FoodService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> Food <span class="token function">makeChicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          Food f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        f<span class="token punctuation">.</span><span class="token function">setChicken</span><span class="token punctuation">(</span><span class="token string">"1kg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          f<span class="token punctuation">.</span><span class="token function">setSpicy</span><span class="token punctuation">(</span><span class="token string">"1g"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          f<span class="token punctuation">.</span><span class="token function">setSalt</span><span class="token punctuation">(</span><span class="token string">"3g"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> f<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> Food <span class="token function">makeNoodle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Food f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Noodle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f<span class="token punctuation">.</span><span class="token function">setNoodle</span><span class="token punctuation">(</span><span class="token string">"500g"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        f<span class="token punctuation">.</span><span class="token function">setSalt</span><span class="token punctuation">(</span><span class="token string">"5g"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> f<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 代理要表现得“就像是”真实实现类，所以需要实现 FoodService</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FoodServiceProxy</span> <span class="token keyword">implements</span> <span class="token class-name">FoodService</span> <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">// 内部一定要有一个真实的实现类，当然也可以通过构造方法注入</span>
    <span class="token keyword">private</span> FoodService foodService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FoodServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> Food <span class="token function">makeChicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我们马上要开始制作鸡肉了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 如果我们定义这句为核心代码的话，那么，核心代码是真实实现类做的，</span>
        <span class="token comment" spellcheck="true">// 代理只是在核心代码前后做些“无足轻重”的事情</span>
        Food chicken <span class="token operator">=</span> foodService<span class="token punctuation">.</span><span class="token function">makeChicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"鸡肉制作完成啦，加点胡椒粉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 增强</span>
          chicken<span class="token punctuation">.</span><span class="token function">addCondiment</span><span class="token punctuation">(</span><span class="token string">"pepper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> fruit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> Food <span class="token function">makeNoodle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"准备制作拉面~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Food noodle <span class="token operator">=</span> foodService<span class="token punctuation">.</span><span class="token function">makeNoodle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"制作完成啦"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> fruit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>客户端调用，注意，我们要用代理来实例化接口：</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 这里用代理类来实例化</span>
FruitService fruitService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FruitServiceProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fruitService<span class="token punctuation">.</span><span class="token function">makeChicken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><img src="http://javadoop.com/blogimages/design-pattern/proxy-1.png" alt="proxy"></p>
<p>我们发现没有，代理模式说白了就是做 <strong>“方法包装”</strong> 或做 <strong>“方法增强”</strong>。在面向切面编程中，算了还是不要吹捧这个名词了，在 AOP 中，其实就是动态代理的过程。比如 Spring 中，我们自己不定义代理类，但是 Spring 会帮我们动态来定义代理，然后把我们定义在 @Before、@After、@Around 中的代码逻辑动态添加到代理中。</p>
<p>说到动态代理，又可以展开说 …… Spring 中实现动态代理有两种，一种是如果我们的类定义了接口，如 UserService 接口和 UserServiceImpl 实现，那么采用 JDK 的动态代理，感兴趣的读者可以去看看 java.lang.reflect.Proxy 类的源码；另一种是我们自己没有定义接口的，Spring 会采用 CGLIB 进行动态代理，它是一个 jar 包，性能还不错。</p>
<h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><p>说完代理模式，说适配器模式，是因为它们很相似，这里可以做个比较。</p>
<p>适配器模式做的就是，有一个接口需要实现，但是我们现成的对象都不满足，需要加一层适配器来进行适配。</p>
<p>适配器模式总体来说分三种：默认适配器模式、对象适配器模式、类适配器模式。先不急着分清楚这几个，先看看例子再说。</p>
<h4 id="默认适配器模式"><a href="#默认适配器模式" class="headerlink" title="默认适配器模式"></a>默认适配器模式</h4><p>首先，我们先看看最简单的适配器模式<strong>默认适配器模式(Default Adapter)</strong>是怎么样的。</p>
<p>我们用 Appache commons-io 包中的 FileAlterationListener 做例子，此接口定义了很多的方法，用于对文件或文件夹进行监控，一旦发生了对应的操作，就会触发相应的方法。</p>
<pre><code>public interface FileAlterationListener {
    void onStart(final FileAlterationObserver observer);
    void onDirectoryCreate(final File directory);
    void onDirectoryChange(final File directory);
    void onDirectoryDelete(final File directory);
    void onFileCreate(final File file);
    void onFileChange(final File file);
    void onFileDelete(final File file);
    void onStop(final FileAlterationObserver observer);
}
</code></pre><p>此接口的一大问题是抽象方法太多了，如果我们要用这个接口，意味着我们要实现每一个抽象方法，如果我们只是想要监控文件夹中的<strong>文件创建</strong>和<strong>文件删除</strong>事件，可是我们还是不得不实现所有的方法，很明显，这不是我们想要的。</p>
<p>所以，我们需要下面的一个<strong>适配器</strong>，它用于实现上面的接口，但是<strong>所有的方法都是空方法</strong>，这样，我们就可以转而定义自己的类来继承下面这个类即可。</p>
<pre><code>public class FileAlterationListenerAdaptor implements FileAlterationListener {

    public void onStart(final FileAlterationObserver observer) {
    }

    public void onDirectoryCreate(final File directory) {
    }

    public void onDirectoryChange(final File directory) {
    }

    public void onDirectoryDelete(final File directory) {
    }

    public void onFileCreate(final File file) {
    }

    public void onFileChange(final File file) {
    }

    public void onFileDelete(final File file) {
    }

    public void onStop(final FileAlterationObserver observer) {
    }
}
</code></pre><p>比如我们可以定义以下类，我们仅仅需要实现我们想实现的方法就可以了：</p>
<pre><code>public class FileMonitor extends FileAlterationListenerAdaptor {
    public void onFileCreate(final File file) {
        // 文件创建
        doSomething();
    }

    public void onFileDelete(final File file) {
        // 文件删除
        doSomething();
    }
}
</code></pre><p>当然，上面说的只是适配器模式的其中一种，也是最简单的一种，无需多言。下面，再介绍<strong>“正统的”</strong>适配器模式。</p>
<h4 id="对象适配器模式"><a href="#对象适配器模式" class="headerlink" title="对象适配器模式"></a>对象适配器模式</h4><p>来看一个《Head First 设计模式》中的一个例子，我稍微修改了一下，看看怎么将鸡适配成鸭，这样鸡也能当鸭来用。因为，现在鸭这个接口，我们没有合适的实现类可以用，所以需要适配器。</p>
<pre><code>public interface Duck {
    public void quack(); // 鸭的呱呱叫
      public void fly(); // 飞
}

public interface Cock {
    public void gobble(); // 鸡的咕咕叫
      public void fly(); // 飞
}

public class WildCock implements Cock {
    public void gobble() {
        System.out.println(&quot;咕咕叫&quot;);
    }
      public void fly() {
        System.out.println(&quot;鸡也会飞哦&quot;);
    }
}
</code></pre><p>鸭接口有 fly() 和 quare() 两个方法，鸡 Cock 如果要冒充鸭，fly() 方法是现成的，但是鸡不会鸭的呱呱叫，没有 quack() 方法。这个时候就需要适配了：</p>
<pre><code>// 毫无疑问，首先，这个适配器肯定需要 implements Duck，这样才能当做鸭来用
public class CockAdapter implements Duck {

    Cock cock;
    // 构造方法中需要一个鸡的实例，此类就是将这只鸡适配成鸭来用
      public CockAdapter(Cock cock) {
        this.cock = cock;
    }

    // 实现鸭的呱呱叫方法
      @Override
      public void quack() {
        // 内部其实是一只鸡的咕咕叫
        cock.gobble();
    }

      @Override
      public void fly() {
        cock.fly();
    }
}
</code></pre><p>客户端调用很简单了：</p>
<pre><code>public static void main(String[] args) {
    // 有一只野鸡
      Cock wildCock = new WildCock();
      // 成功将野鸡适配成鸭
      Duck duck = new CockAdapter(wildCock);
      ...
}
</code></pre><p>到这里，大家也就知道了适配器模式是怎么回事了。无非是我们需要一只鸭，但是我们只有一只鸡，这个时候就需要定义一个适配器，由这个适配器来充当鸭，但是适配器里面的方法还是由鸡来实现的。</p>
<p>我们用一个图来简单说明下：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/adapter-1.png" alt="adapter-1"></p>
<p>上图应该还是很容易理解的，我就不做更多的解释了。下面，我们看看类适配模式怎么样的。</p>
<h4 id="类适配器模式"><a href="#类适配器模式" class="headerlink" title="类适配器模式"></a>类适配器模式</h4><p>废话少说，直接上图：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/adapter-2.png" alt="adapter-1"></p>
<p>看到这个图，大家应该很容易理解的吧，通过继承的方法，适配器自动获得了所需要的大部分方法。这个时候，客户端使用更加简单，直接 <code>Target t = new SomeAdapter();</code> 就可以了。</p>
<h4 id="适配器模式总结"><a href="#适配器模式总结" class="headerlink" title="适配器模式总结"></a>适配器模式总结</h4><ol>
<li><p>类适配和对象适配的异同</p>
<blockquote>
<p>一个采用继承，一个采用组合；</p>
<p>类适配属于静态实现，对象适配属于组合的动态实现，对象适配需要多实例化一个对象。</p>
<p>总体来说，对象适配用得比较多。</p>
</blockquote>
</li>
<li><p>适配器模式和代理模式的异同</p>
<p>比较这两种模式，其实是比较对象适配器模式和代理模式，在代码结构上，它们很相似，都需要一个具体的实现类的实例。但是它们的目的不一样，代理模式做的是增强原方法的活；适配器做的是适配的活，为的是提供“把鸡包装成鸭，然后当做鸭来使用”，而鸡和鸭它们之间原本没有继承关系。</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/adapter-5.png" alt="adapter-5"></p>
</li>
</ol>
<h3 id="桥梁模式"><a href="#桥梁模式" class="headerlink" title="桥梁模式"></a>桥梁模式</h3><p>理解桥梁模式，其实就是理解代码抽象和解耦。</p>
<p>我们首先需要一个桥梁，它是一个接口，定义提供的接口方法。</p>
<pre><code>public interface DrawAPI {
   public void draw(int radius, int x, int y);
}
</code></pre><p>然后是一系列实现类：</p>
<pre><code>public class RedPen implements DrawAPI {
   @Override
   public void draw(int radius, int x, int y) {
      System.out.println(&quot;用红色笔画图，radius:&quot; + radius + &quot;, x:&quot; + x + &quot;, y:&quot; + y);
   }
}
public class GreenPen implements DrawAPI {
   @Override
   public void draw(int radius, int x, int y) {
      System.out.println(&quot;用绿色笔画图，radius:&quot; + radius + &quot;, x:&quot; + x + &quot;, y:&quot; + y);
   }
}
public class BluePen implements DrawAPI {
   @Override
   public void draw(int radius, int x, int y) {
      System.out.println(&quot;用蓝色笔画图，radius:&quot; + radius + &quot;, x:&quot; + x + &quot;, y:&quot; + y);
   }
}
</code></pre><p>定义一个抽象类，此类的实现类都需要使用 DrawAPI：</p>
<pre><code>public abstract class Shape {
   protected DrawAPI drawAPI;

   protected Shape(DrawAPI drawAPI){
      this.drawAPI = drawAPI;
   }
   public abstract void draw();    
}
</code></pre><p>定义抽象类的子类：</p>
<pre><code>// 圆形
public class Circle extends Shape {
   private int radius;

   public Circle(int radius, DrawAPI drawAPI) {
      super(drawAPI);
      this.radius = radius;
   }

   public void draw() {
      drawAPI.draw(radius, 0, 0);
   }
}
// 长方形
public class Rectangle extends Shape {
    private int x;
      private int y;

      public Rectangle(int x, int y, DrawAPI drawAPI) {
        super(drawAPI);
          this.x = x;
          this.y = y;
    }
      public void draw() {
      drawAPI.draw(0, x, y);
   }
}
</code></pre><p>最后，我们来看客户端演示：</p>
<pre><code>public static void main(String[] args) {
    Shape greenCircle = new Circle(10, new GreenPen());
      Shape redRectangle = new Rectangle(4, 8, new RedPen());

      greenCircle.draw();
      redRectangle.draw();
}
</code></pre><p>可能大家看上面一步步还不是特别清晰，我把所有的东西整合到一张图上：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/bridge-1.png" alt="bridge-1"></p>
<p>这回大家应该就知道抽象在哪里，怎么解耦了吧。桥梁模式的优点也是显而易见的，就是非常容易进行扩展。</p>
<blockquote>
<p>本节引用了<a href="https://www.tutorialspoint.com/design_pattern/bridge_pattern.htm" target="_blank" rel="external">这里</a>的例子，并对其进行了修改。</p>
</blockquote>
<h3 id="装饰模式"><a href="#装饰模式" class="headerlink" title="装饰模式"></a>装饰模式</h3><p>要把装饰模式说清楚明白，不是件容易的事情。也许读者知道 Java IO 中的几个类是典型的装饰模式的应用，但是读者不一定清楚其中的关系，也许看完就忘了，希望看完这节后，读者可以对其有更深的感悟。</p>
<p>首先，我们先看一个简单的图，看这个图的时候，了解下层次结构就可以了：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/decorator-1.png" alt="decorator-1"></p>
<p>我们来说说装饰模式的出发点，从图中可以看到，接口 <code>Component</code> 其实已经有了 <code>ConcreteComponentA</code> 和 <code>ConcreteComponentB</code> 两个实现类了，但是，如果我们要<strong>增强</strong>这两个实现类的话，我们就可以采用装饰模式，用具体的装饰器来<strong>装饰</strong>实现类，以达到增强的目的。</p>
<blockquote>
<p>从名字来简单解释下装饰器。既然说是装饰，那么往往就是<strong>添加小功能</strong>这种，而且，我们要满足可以添加多个小功能。最简单的，代理模式就可以实现功能的增强，但是代理不容易实现多个功能的增强，当然你可以说用代理包装代理的方式，但是那样的话代码就复杂了。</p>
</blockquote>
<p>首先明白一些简单的概念，从图中我们看到，所有的具体装饰者们 ConcreteDecorator<em> 都可以作为 Component 来使用，因为它们都实现了 Component 中的所有接口。它们和 Component 实现类 ConcreteComponent</em> 的区别是，它们只是装饰者，起<strong>装饰</strong>作用，也就是即使它们看上去牛逼轰轰，但是它们都只是在具体的实现中<strong>加了层皮来装饰</strong>而已。</p>
<blockquote>
<p>注意这段话中混杂在各个名词中的 Component 和 Decorator，别搞混了。</p>
</blockquote>
<p>下面来看看一个例子，先把装饰模式弄清楚，然后再介绍下 java io 中的装饰模式的应用。</p>
<p>最近大街上流行起来了“快乐柠檬”，我们把快乐柠檬的饮料分为三类：红茶、绿茶、咖啡，在这三大类的基础上，又增加了许多的口味，什么金桔柠檬红茶、金桔柠檬珍珠绿茶、芒果红茶、芒果绿茶、芒果珍珠红茶、烤珍珠红茶、烤珍珠芒果绿茶、椰香胚芽咖啡、焦糖可可咖啡等等，每家店都有很长的菜单，但是仔细看下，其实原料也没几样，但是可以搭配出很多组合，如果顾客需要，很多没出现在菜单中的饮料他们也是可以做的。</p>
<p>在这个例子中，红茶、绿茶、咖啡是最基础的饮料，其他的像金桔柠檬、芒果、珍珠、椰果、焦糖等都属于装饰用的。当然，在开发中，我们确实可以像门店一样，开发这些类：LemonBlackTea、LemonGreenTea、MangoBlackTea、MangoLemonGreenTea……但是，很快我们就发现，这样子干肯定是不行的，这会导致我们需要组合出所有的可能，而且如果客人需要在红茶中加双份柠檬怎么办？三份柠檬怎么办？万一有个变态要四份柠檬，所以这种做法是给自己找加班的。</p>
<p>不说废话了，上代码。</p>
<p>首先，定义饮料抽象基类：</p>
<pre><code>public abstract class Beverage {
      // 返回描述
      public abstract String getDescription();
      // 返回价格
      public abstract double cost();
}
</code></pre><p>然后是三个基础饮料实现类，红茶、绿茶和咖啡：</p>
<pre><code>public class BlackTea extends Beverage {
      public String getDescription() {
        return &quot;红茶&quot;;
    }
      public double cost() {
        return 10;
    }
}
public class GreenTea extends Beverage {
    public String getDescription() {
        return &quot;绿茶&quot;;
    }
      public double cost() {
        return 11;
    }
}
...// 咖啡省略
</code></pre><p>定义调料，也就是装饰者的基类，此类必须继承自 Beverage：</p>
<pre><code>// 调料
public abstract class Condiment extends Beverage {

}
</code></pre><p>然后我们来定义柠檬、芒果等具体的调料，它们属于装饰者，毫无疑问，这些调料肯定都需要继承 Condiment 类：</p>
<pre><code>public class Lemon extends Condiment {
    private Beverage bevarage;
      // 这里很关键，需要传入具体的饮料，如需要传入没有被装饰的红茶或绿茶，
      // 当然也可以传入已经装饰好的芒果绿茶，这样可以做芒果柠檬绿茶
      public Lemon(Beverage bevarage) {
        this.bevarage = bevarage;
    }
      public String getDescription() {
        // 装饰
        return bevarage.getDescription() + &quot;, 加柠檬&quot;;
    }
      public double cost() {
          // 装饰
        return beverage.cost() + 2; // 加柠檬需要 2 元
    }
}
public class Mango extends Condiment {
    private Beverage bevarage;
      public Mango(Beverage bevarage) {
        this.bevarage = bevarage;
    }
      public String getDescription() {
        return bevarage.getDescription() + &quot;, 加芒果&quot;;
    }
      public double cost() {
        return beverage.cost() + 3; // 加芒果需要 3 元
    }
}
...// 给每一种调料都加一个类
</code></pre><p>看客户端调用：</p>
<pre><code>public static void main(String[] args) {
      // 首先，我们需要一个基础饮料，红茶、绿茶或咖啡
    Beverage beverage = new GreenTea();
      // 开始装饰
      beverage = new Lemon(beverage); // 先加一份柠檬
      beverage = new Mongo(beverage); // 再加一份芒果

      System.out.println(beverage.getDescription() + &quot; 价格：￥&quot; + beverage.cost());
      //&quot;绿茶, 加柠檬, 加芒果 价格：￥16&quot;
}
</code></pre><p>如果我们需要芒果珍珠双份柠檬红茶：</p>
<pre><code>Beverage beverage = new Mongo(new Pearl(new Lemon(new Lemon(new BlackTea()))));
</code></pre><p>是不是很变态？</p>
<p>看看下图可能会清晰一些：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/decorator-2.png" alt="decorator-2"></p>
<p>到这里，大家应该已经清楚装饰模式了吧。</p>
<p>下面，我们再来说说 java IO 中的装饰模式。看下图 InputStream 派生出来的部分类：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/decorator-3.png" alt="decorator-3"></p>
<p>我们知道 InputStream 代表了输入流，具体的输入来源可以是文件（FileInputStream）、管道（PipedInputStream）、数组（ByteArrayInputStream）等，这些就像前面奶茶的例子中的红茶、绿茶，属于基础输入流。</p>
<p>FilterInputStream 承接了装饰模式的关键节点，其实现类是一系列装饰器，比如 BufferedInputStream 代表用缓冲来装饰，也就使得输入流具有了缓冲的功能，LineNumberInputStream 代表用行号来装饰，在操作的时候就可以取得行号了，DataInputStream 的装饰，使得我们可以从输入流转换为 java 中的基本类型值。</p>
<p>当然，在 java IO 中，如果我们使用装饰器的话，就不太适合面向接口编程了，如：</p>
<pre><code>InputStream inputStream = new LineNumberInputStream(new BufferedInputStream(new FileInputStream(&quot;&quot;)));
</code></pre><p>这样的结果是，InputStream 还是不具有读取行号的功能，因为读取行号的方法定义在 LineNumberInputStream 类中。</p>
<p>我们应该像下面这样使用：</p>
<pre><code>DataInputStream is = new DataInputStream(
                              new BufferedInputStream(
                                  new FileInputStream(&quot;&quot;)));
</code></pre><blockquote>
<p>所以说嘛，要找到纯的严格符合设计模式的代码还是比较难的。</p>
</blockquote>
<h3 id="门面模式"><a href="#门面模式" class="headerlink" title="门面模式"></a>门面模式</h3><p>门面模式（也叫外观模式，Facade Pattern）在许多源码中有使用，比如 slf4j 就可以理解为是门面模式的应用。这是一个简单的设计模式，我们直接上代码再说吧。</p>
<p>首先，我们定义一个接口：</p>
<pre><code>public interface Shape {
   void draw();
}
</code></pre><p>定义几个实现类：</p>
<pre><code>public class Circle implements Shape {

   @Override
   public void draw() {
      System.out.println(&quot;Circle::draw()&quot;);
   }
}

public class Rectangle implements Shape {

   @Override
   public void draw() {
      System.out.println(&quot;Rectangle::draw()&quot;);
   }
}
</code></pre><p>客户端调用：</p>
<pre><code>public static void main(String[] args) {
    // 画一个圆形
      Shape circle = new Circle();
      circle.draw();

      // 画一个长方形
      Shape rectangle = new Rectangle();
      rectangle.draw();
}
</code></pre><p>以上是我们常写的代码，我们需要画圆就要先实例化圆，画长方形就需要先实例化一个长方形，然后再调用相应的 draw() 方法。</p>
<p>下面，我们看看怎么用门面模式来让客户端调用更加友好一些。</p>
<p>我们先定义一个门面：</p>
<pre><code>public class ShapeMaker {
   private Shape circle;
   private Shape rectangle;
   private Shape square;

   public ShapeMaker() {
      circle = new Circle();
      rectangle = new Rectangle();
      square = new Square();
   }

  /**
   * 下面定义一堆方法，具体应该调用什么方法，由这个门面来决定
   */

   public void drawCircle(){
      circle.draw();
   }
   public void drawRectangle(){
      rectangle.draw();
   }
   public void drawSquare(){
      square.draw();
   }
}
</code></pre><p>看看现在客户端怎么调用：</p>
<pre><code>public static void main(String[] args) {
  ShapeMaker shapeMaker = new ShapeMaker();

  // 客户端调用现在更加清晰了
  shapeMaker.drawCircle();
  shapeMaker.drawRectangle();
  shapeMaker.drawSquare();        
}
</code></pre><p>门面模式的优点显而易见，客户端不再需要关注实例化时应该使用哪个实现类，直接调用门面提供的方法就可以了，因为门面类提供的方法的方法名对于客户端来说已经很友好了。</p>
<h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><p>组合模式用于表示具有层次结构的数据，使得我们对单个对象和组合对象的访问具有一致性。</p>
<p>直接看一个例子吧，每个员工都有姓名、部门、薪水这些属性，同时还有下属员工集合（虽然可能集合为空），而下属员工和自己的结构是一样的，也有姓名、部门这些属性，同时也有他们的下属员工集合。</p>
<pre><code>public class Employee {
   private String name;
   private String dept;
   private int salary;
   private List&lt;Employee&gt; subordinates; // 下属

   public Employee(String name,String dept, int sal) {
      this.name = name;
      this.dept = dept;
      this.salary = sal;
      subordinates = new ArrayList&lt;Employee&gt;();
   }

   public void add(Employee e) {
      subordinates.add(e);
   }

   public void remove(Employee e) {
      subordinates.remove(e);
   }

   public List&lt;Employee&gt; getSubordinates(){
     return subordinates;
   }

   public String toString(){
      return (&quot;Employee :[ Name : &quot; + name + &quot;, dept : &quot; + dept + &quot;, salary :&quot; + salary+&quot; ]&quot;);
   }   
}
</code></pre><p>通常，这种类需要定义 add(node)、remove(node)、getChildren() 这些方法。</p>
<p>这说的其实就是组合模式，这种简单的模式我就不做过多介绍了，相信各位读者也不喜欢看我写废话。</p>
<h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h3><p>英文是 Flyweight Pattern，不知道是谁最先翻译的这个词，感觉这翻译真的不好理解，我们试着强行关联起来吧。Flyweight 是轻量级的意思，享元分开来说就是 共享 元器件，也就是复用已经生成的对象，这种做法当然也就是轻量级的了。</p>
<p>复用对象最简单的方式是，用一个 HashMap 来存放每次新生成的对象。每次需要一个对象的时候，先到 HashMap 中看看有没有，如果没有，再生成新的对象，然后将这个对象放入 HashMap 中。</p>
<p>这种简单的代码我就不演示了。</p>
<h3 id="结构型模式总结"><a href="#结构型模式总结" class="headerlink" title="结构型模式总结"></a>结构型模式总结</h3><p>前面，我们说了代理模式、适配器模式、桥梁模式、装饰模式、门面模式、组合模式和享元模式。读者是否可以分别把这几个模式说清楚了呢？在说到这些模式的时候，心中是否有一个清晰的图或处理流程在脑海里呢？</p>
<p>代理模式是做方法增强的，适配器模式是把鸡包装成鸭这种用来适配接口的，桥梁模式做到了很好的解耦，装饰模式从名字上就看得出来，适合于装饰类或者说是增强类的场景，门面模式的优点是客户端不需要关心实例化过程，只要调用需要的方法即可，组合模式用于描述具有层次结构的数据，享元模式是为了在特定的场景中缓存已经创建的对象，用于提高性能。</p>
<h2 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h2><p>行为型模式关注的是各个类之间的相互作用，将职责划分清楚，使得我们的代码更加地清晰。</p>
<h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h3><p>策略模式太常用了，所以把它放到最前面进行介绍。它比较简单，我就不废话，直接用代码说事吧。</p>
<p>下面设计的场景是，我们需要画一个图形，可选的策略就是用红色笔来画，还是绿色笔来画，或者蓝色笔来画。</p>
<p>首先，先定义一个策略接口：</p>
<pre><code>public interface Strategy {
   public void draw(int radius, int x, int y);
}
</code></pre><p>然后我们定义具体的几个策略：</p>
<pre><code>public class RedPen implements Strategy {
   @Override
   public void draw(int radius, int x, int y) {
      System.out.println(&quot;用红色笔画图，radius:&quot; + radius + &quot;, x:&quot; + x + &quot;, y:&quot; + y);
   }
}
public class GreenPen implements Strategy {
   @Override
   public void draw(int radius, int x, int y) {
      System.out.println(&quot;用绿色笔画图，radius:&quot; + radius + &quot;, x:&quot; + x + &quot;, y:&quot; + y);
   }
}
public class BluePen implements Strategy {
   @Override
   public void draw(int radius, int x, int y) {
      System.out.println(&quot;用蓝色笔画图，radius:&quot; + radius + &quot;, x:&quot; + x + &quot;, y:&quot; + y);
   }
}
</code></pre><p>使用策略的类：</p>
<pre><code>public class Context {
   private Strategy strategy;

   public Context(Strategy strategy){
      this.strategy = strategy;
   }

   public int executeDraw(int radius, int x, int y){
      return strategy.draw(radius, x, y);
   }
}
</code></pre><p>客户端演示：</p>
<pre><code>public static void main(String[] args) {
    Context context = new Context(new BluePen()); // 使用绿色笔来画
      context.executeDraw(10, 0, 0);
}
</code></pre><p>放到一张图上，让大家看得清晰些：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/strategy-1.png" alt="strategy-1"></p>
<p>这个时候，大家有没有联想到结构型模式中的桥梁模式，它们其实非常相似，我把桥梁模式的图拿过来大家对比下：</p>
<p><img src="http://javadoop.com/blogimages/design-pattern/bridge-1.png" alt="bridge-1"></p>
<p>要我说的话，它们非常相似，桥梁模式在左侧加了一层抽象而已。桥梁模式的耦合更低，结构更复杂一些。</p>
<h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><p>观察者模式对于我们来说，真是再简单不过了。无外乎两个操作，观察者订阅自己关心的主题和主题有数据变化后通知观察者们。</p>
<p>首先，需要定义主题，每个主题需要持有观察者列表的引用，用于在数据变更的时候通知各个观察者：</p>
<pre><code>public class Subject {

   private List&lt;Observer&gt; observers = new ArrayList&lt;Observer&gt;();
   private int state;

   public int getState() {
      return state;
   }

   public void setState(int state) {
      this.state = state;
      // 数据已变更，通知观察者们
      notifyAllObservers();
   }

   public void attach(Observer observer){
      observers.add(observer);        
   }

   // 通知观察者们
   public void notifyAllObservers(){
      for (Observer observer : observers) {
         observer.update();
      }
   }     
}
</code></pre><p>定义观察者接口：</p>
<pre><code>public abstract class Observer {
   protected Subject subject;
   public abstract void update();
}
</code></pre><p>其实如果只有一个观察者类的话，接口都不用定义了，不过，通常场景下，既然用到了观察者模式，我们就是希望一个事件出来了，会有多个不同的类需要处理相应的信息。比如，订单修改成功事件，我们希望发短信的类得到通知、发邮件的类得到通知、处理物流信息的类得到通知等。</p>
<p>我们来定义具体的几个观察者类：</p>
<pre><code>public class BinaryObserver extends Observer {

      // 在构造方法中进行订阅主题
    public BinaryObserver(Subject subject) {
        this.subject = subject;
        // 通常在构造方法中将 this 发布出去的操作一定要小心
        this.subject.attach(this);
    }

      // 该方法由主题类在数据变更的时候进行调用
    @Override
    public void update() {
        String result = Integer.toBinaryString(subject.getState());
        System.out.println(&quot;订阅的数据发生变化，新的数据处理为二进制值为：&quot; + result);
    }
}

public class HexaObserver extends Observer {

    public HexaObserver(Subject subject) {
        this.subject = subject;
        this.subject.attach(this);
    }

    @Override
    public void update() {
          String result = Integer.toHexString(subject.getState()).toUpperCase();
        System.out.println(&quot;订阅的数据发生变化，新的数据处理为十六进制值为：&quot; + result);
    }
}
</code></pre><p>客户端使用也非常简单：</p>
<pre><code>public static void main(String[] args) {
    // 先定义一个主题
      Subject subject1 = new Subject();
      // 定义观察者
      new BinaryObserver(subject1);
      new HexaObserver(subject1);

      // 模拟数据变更，这个时候，观察者们的 update 方法将会被调用
      subject.setState(11);
}
</code></pre><p>output:</p>
<pre><code>订阅的数据发生变化，新的数据处理为二进制值为：1011
订阅的数据发生变化，新的数据处理为十六进制值为：B
</code></pre><p>当然，jdk 也提供了相似的支持，具体的大家可以参考 java.util.Observable 和 java.util.Observer 这两个类。</p>
<p>实际生产过程中，观察者模式往往用消息中间件来实现，如果要实现单机观察者模式，笔者建议读者使用 Guava 中的 EventBus，它有同步实现也有异步实现，本文主要介绍设计模式，就不展开说了。</p>
<h3 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h3><p>责任链通常需要先建立一个单向链表，然后调用方只需要调用头部节点就可以了，后面会自动流转下去。比如流程审批就是一个很好的例子，只要终端用户提交申请，根据申请的内容信息，自动建立一条责任链，然后就可以开始流转了。</p>
<p>有这么一个场景，用户参加一个活动可以领取奖品，但是活动需要进行很多的规则校验然后才能放行，比如首先需要校验用户是否是新用户、今日参与人数是否有限额、全场参与人数是否有限额等等。设定的规则都通过后，才能让用户领走奖品。</p>
<blockquote>
<p>如果产品给你这个需求的话，我想大部分人一开始肯定想的就是，用一个 List 来存放所有的规则，然后 foreach 执行一下每个规则就好了。不过，读者也先别急，看看责任链模式和我们说的这个有什么不一样？</p>
</blockquote>
<p>首先，我们要定义流程上节点的基类：</p>
<pre><code>public abstract class RuleHandler {

      // 后继节点
    protected RuleHandler successor;

    public abstract void apply(Context context);

    public void setSuccessor(RuleHandler successor) {
        this.successor = successor;
    }
    public RuleHandler getSuccessor() {
        return successor;
    }
}
</code></pre><p>接下来，我们需要定义具体的每个节点了。</p>
<p>校验用户是否是新用户：</p>
<pre><code>public class NewUserRuleHandler extends RuleHandler {

    public void apply(Context context) {
        if (context.isNewUser()) {
              // 如果有后继节点的话，传递下去
            if (this.getSuccessor() != null) {
                this.getSuccessor().apply(context);
            }
        } else {
            throw new RuntimeException(&quot;该活动仅限新用户参与&quot;);
        }
    }

}
</code></pre><p>校验用户所在地区是否可以参与：</p>
<pre><code>public class LocationRuleHandler extends RuleHandler {
    public void apply(Context context) {
        boolean allowed = activityService.isSupportedLocation(context.getLocation);
          if (allowed) {
            if (this.getSuccessor() != null) {
                this.getSuccessor().apply(context);
            }
        } else  {
            throw new RuntimeException(&quot;非常抱歉，您所在的地区无法参与本次活动&quot;);
        }
    }
}
</code></pre><p>校验奖品是否已领完：</p>
<pre><code>public class LimitRuleHandler extends RuleHandler {
    public void apply(Context context) {
          int remainedTimes = activityService.queryRemainedTimes(context); // 查询剩余奖品
        if (remainedTimes &gt; 0) {
            if (this.getSuccessor() != null) {
                this.getSuccessor().apply(userInfo);
            }
        } else {
            throw new RuntimeException(&quot;您来得太晚了，奖品被领完了&quot;);
        }
    }
}
</code></pre><p>客户端：</p>
<pre><code>public static void main(String[] args) {
    RuleHandler newUserHandler = new NewUserRuleHandler();
      RuleHandler locationHandler = new LocationRuleHandler();
      RuleHandler limitHandler = new LimitRuleHandler();

      // 假设本次活动仅校验地区和奖品数量，不校验新老用户
      locationHandler.setSuccessor(limitHandler);
      locationHandler.apply(context);
}
</code></pre><p>代码其实很简单，就是先定义好一个链表，然后在通过任意一节点后，如果此节点有后继节点，那么传递下去。</p>
<p>至于它和我们前面说的用一个 List 存放需要执行的规则的做法有什么异同，留给读者自己琢磨吧。</p>
<h3 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h3><p>在含有继承结构的代码中，模板方法模式是非常常用的，这也是在开源代码中大量被使用的。</p>
<p>通常会有一个抽象类：</p>
<pre><code>public abstract class AbstractTemplate {
    // 这就是模板方法
      public void templateMethod(){
        init();
        apply(); // 这个是重点
        end(); // 可以作为钩子方法
    }
    protected void init() {
        System.out.println(&quot;init 抽象层已经实现，子类也可以选择覆写&quot;);
    }
      // 留给子类实现
    protected abstract void apply();
    protected void end() {
    }
}
</code></pre><p>模板方法中调用了 3 个方法，其中 apply() 是抽象方法，子类必须实现它，其实模板方法中有几个抽象方法完全是自由的，我们也可以将三个方法都设置为抽象方法，让子类来实现。也就是说，模板方法只负责定义第一步应该要做什么，第二步应该做什么，第三步应该做什么，至于怎么做，由子类来实现。</p>
<p>我们写一个实现类：</p>
<pre><code>public class ConcreteTemplate extends AbstractTemplate {
    public void apply() {
        System.out.println(&quot;子类实现抽象方法 apply&quot;);
    }
      public void end() {
        System.out.println(&quot;我们可以把 method3 当做钩子方法来使用，需要的时候覆写就可以了&quot;);
    }
}
</code></pre><p>客户端调用演示：</p>
<pre><code>public static void main(String[] args) {
    AbstractTemplate t = new ConcreteTemplate();
      // 调用模板方法
      t.templateMethod();
}
</code></pre><p>代码其实很简单，基本上看到就懂了，关键是要学会用到自己的代码中。</p>
<h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><p>update: 2017-10-19</p>
<p>废话我就不说了，我们说一个简单的例子。商品库存中心有个最基本的需求是减库存和补库存，我们看看怎么用状态模式来写。</p>
<p>核心在于，我们的关注点不再是 Context 是该进行哪种操作，而是关注在这个 Context 会有哪些操作。</p>
<p>定义状态接口：</p>
<pre><code>public interface State {
   public void doAction(Context context);
}
</code></pre><p>定义减库存的状态：</p>
<pre><code>public class DeductState implements State {

   public void doAction(Context context) {
      System.out.println(&quot;商品卖出，准备减库存&quot;);
      context.setState(this);

      //... 执行减库存的具体操作
   }

   public String toString(){
      return &quot;Deduct State&quot;;
   }
}
</code></pre><p>定义补库存状态：</p>
<pre><code>public class RevertState implements State {
    public void doAction(Context context) {
        System.out.println(&quot;给此商品补库存&quot;);
          context.setState(this);

          //... 执行加库存的具体操作
    }
      public String toString() {
        return &quot;Revert State&quot;;
    }
}
</code></pre><p>前面用到了 context.setState(this)，我们来看看怎么定义 Context 类：</p>
<pre><code>public class Context {
    private State state;
      private String name;
      public Context(String name) {
        this.name = name;
    }

      public void setState(State state) {
        this.state = state;
    }
      public void getState() {
        return this.state;
    }
}
</code></pre><p>我们来看下客户端调用，大家就一清二楚了：</p>
<pre><code>public static void main(String[] args) {
    // 我们需要操作的是 iPhone X
    Context context = new Context(&quot;iPhone X&quot;);

    // 看看怎么进行补库存操作
      State revertState = new RevertState();
      revertState.doAction(context);

    // 同样的，减库存操作也非常简单
      State deductState = new DeductState();
      deductState.doAction(context);

      // 如果需要我们可以获取当前的状态
    // context.getState().toString();
}
</code></pre><p>读者可能会发现，在上面这个例子中，如果我们不关心当前 context 处于什么状态，那么 Context 就可以不用维护 state 属性了，那样代码会简单很多。</p>
<p>不过，商品库存这个例子毕竟只是个例，我们还有很多实例是需要知道当前 context 处于什么状态的。</p>
<h3 id="行为型模式总结"><a href="#行为型模式总结" class="headerlink" title="行为型模式总结"></a>行为型模式总结</h3><p>行为型模式部分介绍了策略模式、观察者模式、责任链模式、模板方法模式和状态模式，其实，经典的行为型模式还包括备忘录模式、命令模式等，但是它们的使用场景比较有限，而且本文篇幅也挺大了，我就不进行介绍了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>学习设计模式的目的是为了让我们的代码更加的优雅、易维护、易扩展。我以前学设计模式的初衷是为了看懂开源代码，也为了写出装B的代码。这次整理这篇文章，让我重新审视了一下各个设计模式，对我自己而言收获还是挺大的。我想，文章的最大收益者一般都是作者本人，为了写一篇文章，需要巩固自己的知识，需要寻找各种资料，而且，自己写过的才最容易记住，也算是我给读者的建议吧。</p>
<p>（全文完）</p>

    

    
</div>

<script>
    window.onload=function() {
        $('.music').attr('src', '//music.163.com/outchain/player?type=2&id=' +  + '&auto=1&height=66');
    }
</script>


                

                <!-- Post Comments -->
                
                    









                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/10/27/IntelliJ-IDEA-For-Mac-快捷键/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/10/25/Mac安装mycli命令行工具/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/daily_pic.gif);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="http://photo-static-cdn.ufoto.com.cn/upload/tiny/2495052/17ab1ad9-568a-42a2-a61b-3960a348da2d.JPG" alt="你的名字。's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        hiyourname@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="/about" target="_self" title="关于我">
                        <!-- 
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">用户</i>
                        
                        关于我 -->
                        <img src="/img/common/用户.svg" class="sidebar-material-icons">
                        关于我
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                <img src="/img/common/首页.svg" class="sidebar-material-icons">
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags/生活/index.html" title="生活">
                <img src="/img/common/发送.svg" class="sidebar-material-icons">
                生活
            </a>
        </li>
        
    
        <li>
            <a href="/tags/技术/index.html" title="技术">
                <img src="/img/common/笔记本.svg" class="sidebar-material-icons">
                技术
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签">
                <img src="/img/common/标签.svg" class="sidebar-material-icons">
                标签
            </a>
        </li>
        
    
        <li>
            <a href="http://m.ufoto.com.cn/user/cb23f157d713020546d9043ef46ea08b" title="视界">
                <img src="/img/common/相机.svg" class="sidebar-material-icons">
                视界
            </a>
        </li>
        
    
        <li>
            <a href="/gallery" title="相册">
                <img src="/img/common/图片.svg" class="sidebar-material-icons">
                相册
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友军">
                <img src="/img/common/链接.svg" class="sidebar-material-icons">
                友军
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!--动画-->

<!--动画-->

<style>
  .container {
    background: #e3f1ff;
    margin: 3em auto;
    position: relative;
  }

  .container svg {
    width: 100%;
    height: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  .st0 {
    fill: #E3F1FF;
  }

  .st1 {
    fill: #9ADB88;
  }

  .st2 {
    fill: #CFC9C8;
  }

  .st3 {
    fill: #FFFFFF;
  }

  .st4 {
    fill: #96D986;
  }

  .st5 {
    fill: #94AFB5;
  }

  .st6 {
    fill: #5BAD69;
  }

  .st7 {
    fill: none;
    stroke: #37395E;
    stroke-width: 7;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-miterlimit: 10;
  }

  .st8 {
    fill: #77C97C;
  }

  .st9 {
    fill: none;
    stroke: #97E693;
    stroke-width: 6;
    stroke-linecap: round;
    stroke-miterlimit: 10;
  }

  .st10 {
    fill: none;
    stroke: #CBF78F;
    stroke-linecap: round;
    stroke-miterlimit: 10;
  }

  .st11 {
    fill: #F2E6F4;
  }

  .st12 {
    fill: #302B3B;
  }

  .st13 {
    fill: #E6E6E6;
  }

  .st14 {
    fill: #E9DDEB;
  }

  .st15 {
    fill: #F15A24;
  }

  .st16 {
    fill: #EDE7E6;
  }

  .st17 {
    fill: #E65624;
  }

  .st18 {
    fill: none;
    stroke: #85C87D;
    stroke-width: 3;
    stroke-linecap: round;
    stroke-miterlimit: 10;
  }

  .st19 {
    opacity: 5.000000e-02;
  }

  .st20 {
    fill: #39455E;
  }

  .st21 {
    fill: #F0D0B4;
  }

  .st22 {
    fill: #FCB94D;
  }

  .st23 {
    fill: #FCE3BD;
  }

  .st24 {
    fill: #8BD2FF;
  }

  .st25 {
    fill: #C9A27D;
  }

  .st26 {
    fill: #FF9933;
  }

  .st27 {
    opacity: 2.000000e-02;
    fill: none;
    stroke: #000000;
    stroke-width: 4;
    stroke-linecap: round;
    stroke-miterlimit: 10;
  }

  .st28 {
    fill: none;
    stroke: #FCB94D;
    stroke-width: 4.5;
    stroke-linecap: round;
    stroke-miterlimit: 10;
  }

  .st29 {
    fill: #15121A;
  }

  .st30 {
    fill: #EEE5E0;
  }

  .st31 {
    fill: #6FBF73;
  }

  .st32 {
    fill: #6CBA70;
  }

  .st33 {
    fill: none;
    stroke: #8FD98B;
    stroke-width: 6;
    stroke-linecap: round;
    stroke-miterlimit: 10;
  }

  .st34 {
    fill: #CBF78F;
  }

  .st35 {
    fill: #76C976;
  }

  .st36 {
    fill: none;
    stroke: #FCB94D;
    stroke-width: 3;
    stroke-miterlimit: 10;
  }

  .st37 {
    fill: #FF9933;
    stroke: #FCB94D;
    stroke-width: 3;
    stroke-miterlimit: 10;
  }

  .st38 {
    opacity: 0.75;
  }

  .st39 {
    fill: url(#SVGID_1_);
  }

  .st40 {
    fill: url(#SVGID_2_);
  }

  .st41 {
    fill: url(#SVGID_3_);
  }

  .st42 {
    fill: url(#SVGID_4_);
  }

  .st43 {
    fill: url(#SVGID_5_);
  }

  .st44 {
    fill: url(#SVGID_6_);
  }

  .st45 {
    fill: url(#SVGID_7_);
  }

  .st46 {
    fill: url(#SVGID_8_);
  }

  .st47 {
    fill: url(#SVGID_9_);
  }

  .st48 {
    fill: url(#SVGID_10_);
  }

  .st49 {
    fill: url(#SVGID_11_);
  }

  .st50 {
    fill: url(#SVGID_12_);
  }

  .st51 {
    fill: url(#SVGID_13_);
  }

  .st52 {
    fill: url(#SVGID_14_);
  }

  .st53 {
    fill: url(#SVGID_15_);
  }

  .st54 {
    fill: url(#SVGID_16_);
  }

  .st55 {
    fill: url(#SVGID_17_);
  }

  .st56 {
    fill: url(#SVGID_18_);
  }

  .st57 {
    fill: url(#SVGID_19_);
  }

  .st58 {
    fill: url(#SVGID_20_);
  }

  .st59 {
    fill: url(#SVGID_21_);
  }

  .st60 {
    fill: url(#SVGID_22_);
  }

  .st61 {
    fill: url(#SVGID_23_);
  }

  .st62 {
    fill: url(#SVGID_24_);
  }

  .st63 {
    fill: url(#SVGID_25_);
  }

  .st64 {
    fill: url(#SVGID_26_);
  }

  .st65 {
    fill: url(#SVGID_27_);
  }

  .st66 {
    fill: url(#SVGID_28_);
  }
</style>
<div class="container">
  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
       xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px"
       width="600px" height="600px" viewBox="0 0 600 600" style="enable-background:new 0 0 600 600;"
       xml:space="preserve">
    <defs>
    </defs>
    <rect class="st0" width="600" height="600" />
    <path class="st1" d="M546.2,440.5l-127.3-63.7c0.2-0.1,0.4-0.2,0.6-0.3c-13.6-10.9-26.2-23-37.8-36.1c-7.8-8.8-13.8-19.1-18.4-29.9
    c-9-21-30.6-35-54.7-33.3l-83.9-1c-22.5,1.6-41.1,23.6-48.2,43.6c-2.9,8.2-6.2,16.3-10.3,24.1c-10.5,20.4-21.1,40.7-31.6,61.1
    l-70.6,35.3c-9.5,4.7-9.5,18.3,0,23l235.4,117.7c3.6,1.8,7.9,1.8,11.5,0l235.4-117.7C555.6,458.8,555.6,445.2,546.2,440.5z"
    />
    <g>
      <g>
        <path class="st2" d="M210,208c0.5-0.2,0.2,4.9,0.2,5.3c-0.1,2.5-0.1,5.1-0.1,7.6c0,2.1,3.2,2.1,3.3,0c0-2.4,0.1-4.7,0.1-7.1
        c0-1.6,0.1-3.6-0.5-5.1c-0.5-1.2-2.3-2.4-3.4-1.2C209.3,207.7,209.6,208.1,210,208L210,208z"
        />
      </g>
    </g>
    <g>
      <g>
        <path class="st3" d="M270.4,487.8c0.2,0,0.2-0.3,0-0.3C270.3,487.6,270.3,487.8,270.4,487.8L270.4,487.8z"
        />
      </g>
    </g>
    <path class="st4" d="M100.8,482l75-37.5c12.1-6,21.9-15.7,28.1-27.7c7.6-14.8,15.3-29.5,22.9-44.3c3.6-7,6.6-14.4,9.2-21.9
    c7-20.1,25.8-42.5,48.5-44.2l77.1,0.9c-9.8-19.2-30.4-31.6-53.2-29.9l-83.9-1c-22.7,1.7-41.5,24.1-48.5,44.2
    c-2.6,7.5-5.6,14.8-9.2,21.9c-10.8,20.9-21.6,41.8-32.5,62.7l-70.6,35.3c-9.5,4.7-9.5,18.3,0,23l235.4,117.7c0,0,0,0,0,0L100.8,482z
    " />
    <g>
      <path class="st5" d="M280.7,314.7h-29.3c-2.6,0-4.7-2.1-4.7-4.7v-1.8c0-2.6,2.1-4.7,4.7-4.7h29.3c2.6,0,4.7,2.1,4.7,4.7v1.8
      C285.4,312.6,283.3,314.7,280.7,314.7z" />
    </g>
    <g>
      <path class="st6" d="M212,283.8L212,283.8c-15.1,0-27.3-12.2-27.3-27.3v-48.4c0-15.1,12.2-27.3,27.3-27.3h0
      c15.1,0,27.3,12.2,27.3,27.3v48.4C239.3,271.6,227.1,283.8,212,283.8z" />
    </g>
    <g class="tree">
      <line class="st7" x1="333.2" y1="268" x2="333.2" y2="299" />
      <path class="st8" d="M336.1,278.5L336.1,278.5c-15.1,0-27.3-12.2-27.3-27.3v-48.4c0-15.1,12.2-27.3,27.3-27.3h0
      c15.1,0,27.3,12.2,27.3,27.3v48.4C363.3,266.3,351.1,278.5,336.1,278.5z" />
      <path class="st9" d="M331.4,185.2c0.9-0.1,11-1.5,17.8,6.9c4.4,5.4,4.8,11.8,4.9,13.8"
      />
      <g>
        <path class="st10" d="M329.1,241.9c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M342.5,241.9c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M335.8,249.9c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M329.1,257.9c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
      </g>
    </g>
    <g>
      <path class="st3" d="M285.4,231.5c-0.6-0.4-1.4-0.2-1.9,0.3c-0.5,0.5-0.7,1.2-0.6,1.9c0.1,1.6,1.2,3.1,2.8,3.6
      c1.5,0.5,3.2,0,4.1-1.2c0.9-1.2,0.9-3.1-0.1-4.2c-1.1-1.1-2.8-1.3-4.4-1.3c-0.9,0-1.8,0-2.7-0.1c-0.9,0-1.9,0-2.7,0.4
      c-1.3,0.7-1.8,2.4-1.9,3.9c-0.2,2.3,0.3,4.6,1.2,6.7c0.6-0.5,0.4-1.4,0.7-2.1c0.5-1.5,2.4-1.8,4-1.7s3.4,0.2,4.4-0.9"
      />
    </g>
    <g>
      <path class="st3" d="M293.6,231.5c0.6-0.4,1.4-0.2,1.9,0.3c0.5,0.5,0.7,1.2,0.6,1.9c-0.1,1.6-1.2,3.1-2.8,3.6
      c-1.5,0.5-3.2,0-4.1-1.2s-0.9-3.1,0.1-4.2c1.1-1.1,2.8-1.3,4.4-1.3c0.9,0,1.8,0,2.7-0.1c0.9,0,1.9,0,2.7,0.4
      c1.3,0.7,1.8,2.4,1.9,3.9c0.2,2.3-0.3,4.6-1.2,6.7c-0.6-0.5-0.4-1.4-0.7-2.1c-0.5-1.5-2.4-1.8-4-1.7c-1.6,0.1-3.4,0.2-4.4-0.9"
      />
    </g>
    <g>
      <path class="st11" d="M321.1,307.8H212c-5.5,0-10-4.5-10-10V178.1c0-29.7,24.3-54.1,54.1-54.1h21.1c29.7,0,54.1,24.3,54.1,54.1
      v119.7C331.2,303.3,326.6,307.8,321.1,307.8z" />
    </g>
    <g>
      <path class="st12" d="M269.3,307.8h-20.7v-49.8c0-8.2,6.7-14.9,14.9-14.9h5.8c8.2,0,14.9,6.7,14.9,14.9v35
      C284.2,301.1,277.5,307.8,269.3,307.8z" />
    </g>
    <g>
      <path class="st12" d="M268.7,212.2h-3.2c-4.6,0-8.3-3.7-8.3-8.3v-3.2c0-4.6,3.7-8.3,8.3-8.3h3.2c4.6,0,8.3,3.7,8.3,8.3v3.2
      C277,208.5,273.2,212.2,268.7,212.2z" />
    </g>
    <g>
      <path class="st13" d="M229.2,143.9c-0.1-4-0.1-8,0-12c0.2-6.2,8.5-8.1,11.4-2.6c1.2,2.3,2.5,4.7,3.7,7"
      />
    </g>
    <path class="st14" d="M221.7,297.7V178.1c0-29.7,24.6-54.1,54.3-54.1h-20c-29.7,0-54.3,24.3-54.3,54.1v119.7
    c0,5.5,4.8,10.3,10.3,10.3h20C226.4,308,221.7,303.3,221.7,297.7z" />
    <g>
      <g>
        <path class="st2" d="M330.5,230h-24.7c-0.7,0-1.3-0.8-1.3-1.5s0.6-1.5,1.3-1.5h24.7c0.7,0,1.3,0.8,1.3,1.5S331.2,230,330.5,230z"
        />
      </g>
      <g>
        <path class="st2" d="M330.5,238h-16.7c-0.7,0-1.3,0.2-1.3-0.5s0.6-0.5,1.3-0.5h16.7c0.7,0,1.3-0.2,1.3,0.5S331.2,238,330.5,238z"
        />
      </g>
      <g>
        <path class="st2" d="M320.7,238.2c-0.7,0-2-0.6-2-1.3v-8.7c0-0.7,1.3-1.3,2-1.3s2,0.6,2,1.3v8.7
        C322.7,237.6,321.4,238.2,320.7,238.2z" />
      </g>
    </g>
    <path class="st14" d="M277.1,126H256c-8.4,0-16.4,2-23.6,5.5L204,164.7c-1.4,4.9-2.4,10-2.4,15.3v3.3c19-2.7,40.7-4.8,65.5-4.6
    c24.2,0.2,45.5,2.4,63.5,5.2c0,0-0.1,0-0.1,0v-3.9c0-4.1-0.2-8-1.1-11.9l-26.5-35.4C295.3,128.5,286.6,126,277.1,126z"
    />
    <g>
      <path class="st15" d="M199.5,174.2c-4.6,0.7-7.7-4.3-4.8-7.7l61.2-72.2c6.5-7.6,20-7.3,26,0.6L336,167c2.6,3.5-0.5,8.2-5,7.5
      c-18.1-2.9-39.5-5.1-63.7-5.2C241.4,169.1,218.5,171.3,199.5,174.2z" />
    </g>
    <g>
      <circle class="st15" cx="268.7" cy="83.4" r="4.6" />
    </g>
    <g>
      <path class="st15" d="M269.1,91.4h-0.7c-0.8,0-1.5-0.7-1.5-1.5V77.9c0-0.8,0.7-1.5,1.5-1.5h0.7c0.8,0,1.5,0.7,1.5,1.5v12.1
      C270.6,90.7,269.9,91.4,269.1,91.4z" />
    </g>
    <g>
      <path class="st16" d="M280.8,311.2h-29c-2.6,0-4.6-2.1-4.6-4.6v-3.7c0-2.6,2.1-4.6,4.6-4.6h29c2.6,0,4.6,2.1,4.6,4.6v3.7
      C285.4,309.2,283.4,311.2,280.8,311.2z" />
    </g>
    <g>
      <g>
        <path class="st2" d="M227.7,208h-24.7c-0.7,0-1.3-0.3-1.3-1s0.6-1,1.3-1h24.7c0.7,0,1.3,0.3,1.3,1S228.5,208,227.7,208z"
        />
      </g>
      <g>
        <path class="st2" d="M227.7,218h-19.3c-0.7,0-1.3-0.8-1.3-1.5s0.6-1.5,1.3-1.5h19.3c0.7,0,1.3,0.8,1.3,1.5S228.5,218,227.7,218z"
        />
      </g>
      <g>
        <path class="st2" d="M213.7,216.8c-0.7,0-1-0.6-1-1.3v-8.7c0-0.7,0.3-1.3,1-1.3s1,0.6,1,1.3v8.7
        C214.7,216.2,214.4,216.8,213.7,216.8z" />
      </g>
    </g>
    <g>
      <path class="st17" d="M224.7,166.5l58.8-69.4l-1.6-2.2c-6-7.9-19.5-8.3-26-0.6l-61.2,72.2c-2.9,3.4,0.2,8.5,4.8,7.7
      c7.6-1.2,15.7-2.2,24.4-3C223.3,169.7,223.4,167.9,224.7,166.5z" />
      <path class="st17" d="M297.3,169.3c-6.2,0-12.2,0.1-18.1,0.3c19.3,0.7,36.7,2.6,51.8,5c2.7,0.4,4.9-1.1,5.6-3.1
      C324.6,170.2,311.4,169.4,297.3,169.3z" />
    </g>
    <path class="st18" d="M238.1,308.8c-9.2-36.2-4.7-66.2,11.1-74.7c2.8-1.5,6.6-2.7,11.7-2.5"
    />
    <ellipse transform="matrix(2.306523e-02 -0.9997 0.9997 2.306523e-02 15.8618 486.9621)"
             class="st18" cx="257.1" cy="235.4" rx="3" ry="3" />
    <ellipse transform="matrix(2.306523e-02 -0.9997 0.9997 2.306523e-02 9.5211 472.8698)"
             class="st18" cx="246.7" cy="231.6" rx="3" ry="3" />
    <ellipse transform="matrix(2.306523e-02 -0.9997 0.9997 2.306523e-02 -69.3541 519.8388)"
             class="st18" cx="231.3" cy="295.4" rx="3" ry="3" />
    <ellipse transform="matrix(2.306523e-02 -0.9997 0.9997 2.306523e-02 -59.4512 520.1183)"
             class="st18" cx="236.4" cy="290.5" rx="3" ry="3" />
    <ellipse transform="matrix(0.281 -0.9597 0.9597 0.281 -78.1786 416.8185)"
             class="st18" cx="239.1" cy="260.6" rx="3" ry="3" />
    <ellipse transform="matrix(0.281 -0.9597 0.9597 0.281 -76.4493 407.5442)"
             class="st18" cx="233.8" cy="254.8" rx="3" ry="3" />
    <ellipse transform="matrix(0.281 -0.9597 0.9597 0.281 -85.9996 411.0103)"
             class="st18" cx="231.3" cy="262.9" rx="3" ry="3" />
    <ellipse transform="matrix(2.306523e-02 -0.9997 0.9997 2.306523e-02 -47.1605 504.5106)"
             class="st18" cx="234.6" cy="276.4" rx="3" ry="3" />
    <ellipse transform="matrix(0.281 -0.9597 0.9597 0.281 -112.9454 442.865)"
             class="st18" cx="239.1" cy="296.8" rx="3" ry="3" />
    <ellipse transform="matrix(0.281 -0.9597 0.9597 0.281 -58.0444 406.2438)"
             class="st18" cx="242.1" cy="241.9" rx="3" ry="3" />
    <g>
      <path class="st5" d="M364.5,410.7l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
      l8.2,4.4C367.7,404.6,367.7,409.1,364.5,410.7z" />
      <path class="st5" d="M340.5,385.9l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
      l8.2,4.4C343.7,379.8,343.7,384.3,340.5,385.9z" />
      <path class="st5" d="M317.3,361.3l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
      l8.2,4.4C320.6,355.2,320.5,359.7,317.3,361.3z" />
      <path class="st5" d="M293.3,336.7l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
      l8.2,4.4C296.5,330.6,296.5,335.1,293.3,336.7z" />
      <path class="st5" d="M392.4,435l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
      l8.2,4.4C395.6,428.9,395.6,433.4,392.4,435z" />
    </g>
    <path class="st11" d="M364.5,407.4l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
    l8.2,4.4C367.7,401.3,367.7,405.8,364.5,407.4z" />
    <path class="st11" d="M340.5,382.6l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
    l8.2,4.4C343.7,376.5,343.7,381,340.5,382.6z" />
    <path class="st11" d="M317.3,358l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
    l8.2,4.4C320.6,351.9,320.5,356.4,317.3,358z" />
    <path class="st11" d="M293.3,333.4l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
    l8.2,4.4C296.5,327.2,296.5,331.8,293.3,333.4z" />
    <path class="st11" d="M392.4,431.6l-12.3,6.2c-1.2,0.6-2.7,0.6-3.9,0l-8.5-4.3c-3.2-1.6-3.2-6.2,0-7.8l12.6-6.3c1.3-0.6,2.8-0.6,4,0
    l8.2,4.4C395.6,425.5,395.6,430,392.4,431.6z" />
    <path class="st19" d="M346.5,539.1l-3.4-0.9c-5.7-1.5-6.1-9.6-0.7-13.9l1.7-1.3c8.4-6.6,18.6-9.1,27.4-6.8l1.8,0.5
    c5.7,1.5,6.1,9.6,0.7,13.9l-3.2,2.5C363.4,538.9,354.3,541.2,346.5,539.1z" />
    <path class="st19" d="M320,491.5l-3.4-0.9c-5.7-1.5-6.1-9.6-0.7-13.9l1.7-1.3c8.4-6.6,18.6-9.1,27.4-6.8l1.8,0.5
    c5.7,1.5,6.1,9.6,0.7,13.9l-3.2,2.5C336.9,491.3,327.9,493.5,320,491.5z" />
    <path class="st19" d="M264.5,534.4l3.4-0.9c5.7-1.5,6.1-9.6,0.7-13.9l-1.7-1.3c-8.4-6.6-18.6-9.1-27.4-6.8l-1.8,0.5
    c-5.7,1.5-6.1,9.6-0.7,13.9l3.2,2.5C247.6,534.2,256.7,536.5,264.5,534.4z" />
    <path class="st19" d="M234.2,495l3.4-0.9c5.7-1.5,6.1-9.6,0.7-13.9l-1.7-1.3c-8.4-6.6-18.6-9.1-27.4-6.8l-1.8,0.5
    c-5.7,1.5-6.1,9.6-0.7,13.9l3.2,2.5C217.3,494.8,226.4,497,234.2,495z" />
    <g>
      <g>
        <path class="st20" d="M354.3,534.6c-0.1,0-0.1,0-0.2,0c-1.3-0.1-2.3-1.2-2.2-2.5l1-14.6c0.1-1.3,1.2-2.3,2.5-2.2
        c1.3,0.1,2.3,1.2,2.2,2.5l-1,14.6C356.6,533.7,355.5,534.6,354.3,534.6z" />
      </g>
      <g>
        <path class="st20" d="M369.9,527.1c-1.3,0-2.3-1-2.3-2.3v-14.6c0-1.3,1-2.3,2.3-2.3s2.3,1,2.3,2.3v14.6
        C372.2,526.1,371.2,527.1,369.9,527.1z" />
      </g>
      <g>
        <path class="st20" d="M345.7,532.6c-0.1,0-0.1,0-0.2,0c-1.3-0.1-2.3-1.2-2.2-2.5l1-14.6c0.1-1.3,1.2-2.3,2.5-2.2
        c1.3,0.1,2.3,1.2,2.2,2.5l-1,14.6C347.9,531.6,346.9,532.6,345.7,532.6z" />
      </g>
      <g>
        <circle class="st3" cx="348.4" cy="513.3" r="6.3" />
        <circle class="st3" cx="361.1" cy="510.1" r="6.3" />
        <circle class="st3" cx="353.5" cy="507.1" r="6.3" />
        <circle class="st3" cx="364.3" cy="502.5" r="6.3" />
        <circle class="st3" cx="373.3" cy="507.1" r="6.3" />
        <circle class="st3" cx="370" cy="514.3" r="6.3" />
        <circle class="st3" cx="359" cy="517.6" r="6.3" />
      </g>
      <g class="sheepHead">
        <path class="st20" d="M346,515.6l-1.8,6.4c-0.5,1.7-2.2,2.6-3.9,2.1l-1.2-0.3c-1.7-0.5-2.6-2.2-2.1-3.9l1.8-6.4
        c0.5-1.7,2.2-2.6,3.9-2.1l1.2,0.3C345.5,512.2,346.5,514,346,515.6z" />
        <path class="st20 sheepLeftEar2" d="M339.3,512.3l0.3,0.4c0.4,0.6,0.2,1.3-0.3,1.7l-2.9,1.9c-0.6,0.4-1.3,0.2-1.7-0.3l-0.3-0.4
        c-0.4-0.6-0.2-1.3,0.3-1.7l2.9-1.9C338.2,511.6,338.9,511.7,339.3,512.3z" />
        <path class="st20 sheepRightEar2" d="M345.5,513.7l0.3-0.4c0.4-0.5,1.2-0.6,1.7-0.2l2.7,2.1c0.5,0.4,0.6,1.2,0.2,1.7l-0.3,0.4
        c-0.4,0.5-1.2,0.6-1.7,0.2l-2.7-2.1C345.2,515,345.1,514.3,345.5,513.7z" />
      </g>
    </g>
    <g>
      <g>
        <path class="st20" d="M211.1,483.2c-0.1,0-0.1,0-0.2,0c-1.3-0.1-2.3-1.2-2.2-2.5l1-14.6c0.1-1.3,1.2-2.3,2.5-2.2
        c1.3,0.1,2.3,1.2,2.2,2.5l-1,14.6C213.4,482.3,212.3,483.2,211.1,483.2z" />
      </g>
      <g class="sheepHead">
        <path class="st20" d="M212.3,463.7l-4.7,4.7c-1.2,1.2-3.2,1.2-4.4,0l-0.9-0.9c-1.2-1.2-1.2-3.2,0-4.4l4.7-4.7
        c1.2-1.2,3.2-1.2,4.4,0l0.9,0.9C213.6,460.5,213.6,462.4,212.3,463.7z" />
        <path class="st20 sheepLeftEar2" d="M207.3,460.2l0.1,0.5c0.1,0.7-0.3,1.3-1,1.4l-3.4,0.6c-0.7,0.1-1.3-0.3-1.4-1l-0.1-0.5
        c-0.1-0.7,0.3-1.3,1-1.4l3.4-0.6C206.5,459.1,207.2,459.6,207.3,460.2z" />
      </g>
      <g>
        <path class="st20" d="M227.1,491.4c-1.2,0-2.2-0.9-2.3-2.2l-1-14.6c-0.1-1.3,0.9-2.4,2.2-2.5c1.3-0.1,2.4,0.9,2.5,2.2l1,14.6
        c0.1,1.3-0.9,2.4-2.2,2.5C227.2,491.4,227.1,491.4,227.1,491.4z" />
      </g>
      <g>
        <path class="st20" d="M235.7,490c-1.2,0-2.2-0.9-2.3-2.2l-1-14.6c-0.1-1.3,0.9-2.4,2.2-2.5c1.3-0.1,2.4,0.9,2.5,2.2l1,14.6
        c0.1,1.3-0.9,2.4-2.2,2.5C235.8,490,235.8,490,235.7,490z" />
      </g>
      <g>
        <circle class="st3" cx="235.2" cy="470.5" r="6.3" />
        <circle class="st3" cx="222.4" cy="467.3" r="6.3" />
        <circle class="st3" cx="230.1" cy="464.2" r="6.3" />
        <circle class="st3" cx="219.3" cy="459.7" r="6.3" />
        <circle class="st3" cx="210.2" cy="464.2" r="6.3" />
        <circle class="st3" cx="213.6" cy="471.5" r="6.3" />
        <circle class="st3" cx="224.6" cy="474.8" r="6.3" />
      </g>
    </g>
    <g>
      <g>
        <path class="st20" d="M258.2,532.3c0.1,0,0.1,0,0.2,0c1.3-0.1,2.3-1.2,2.2-2.5l-1-14.6c-0.1-1.3-1.2-2.3-2.5-2.2
        c-1.3,0.1-2.3,1.2-2.2,2.5l1,14.6C256,531.4,257,532.3,258.2,532.3z" />
      </g>
      <g>
        <path class="st20" d="M242.6,524.9c1.3,0,2.3-1,2.3-2.3v-14.6c0-1.3-1-2.3-2.3-2.3c-1.3,0-2.3,1-2.3,2.3v14.6
        C240.3,523.8,241.4,524.9,242.6,524.9z" />
      </g>
      <g>
        <path class="st20" d="M266.8,530.3c0.1,0,0.1,0,0.2,0c1.3-0.1,2.3-1.2,2.2-2.5l-1-14.6c-0.1-1.3-1.2-2.3-2.5-2.2
        c-1.3,0.1-2.3,1.2-2.2,2.5l1,14.6C264.6,529.4,265.6,530.3,266.8,530.3z" />
      </g>
      <g>
        <circle class="st3" cx="264.1" cy="511.1" r="6.3" />
        <circle class="st3" cx="251.4" cy="507.9" r="6.3" />
        <circle class="st3" cx="259" cy="504.8" r="6.3" />
        <circle class="st3" cx="248.2" cy="500.3" r="6.3" />
        <circle class="st3" cx="239.2" cy="504.8" r="6.3" />
        <circle class="st3" cx="242.6" cy="512.1" r="6.3" />
        <circle class="st3" cx="253.5" cy="515.4" r="6.3" />
      </g>
      <g class="sheepHead">
        <path class="st20" d="M270.9,512.7l4.7,4.7c1.2,1.2,3.2,1.2,4.4,0l0.9-0.9c1.2-1.2,1.2-3.2,0-4.4l-4.7-4.7c-1.2-1.2-3.2-1.2-4.4,0
        l-0.9,0.9C269.7,509.5,269.7,511.5,270.9,512.7z" />
        <path class="st20 sheepRightEar" d="M275.6,507.7l0.1-0.5c0.1-0.7,0.8-1.1,1.4-1l3.4,0.7c0.7,0.1,1.1,0.8,1,1.4l-0.1,0.5c-0.1,0.7-0.8,1.1-1.4,1
        l-3.4-0.7C275.9,509,275.4,508.3,275.6,507.7z" />
        <path class="st20 sheepLeftEar" d="M272.2,508.1l-0.3-0.4c-0.4-0.5-1.2-0.6-1.7-0.2l-2.7,2.1c-0.5,0.4-0.6,1.2-0.2,1.7l0.3,0.4
        c0.4,0.5,1.2,0.6,1.7,0.2l2.7-2.1C272.5,509.4,272.6,508.6,272.2,508.1z" />
      </g>
    </g>
    <g>
      <g>
        <path class="st20" d="M327.5,486.6c-0.1,0-0.1,0-0.2,0c-1.3-0.1-2.3-1.2-2.2-2.5l1-14.6c0.1-1.3,1.2-2.3,2.5-2.2
        c1.3,0.1,2.3,1.2,2.2,2.5l-1,14.6C329.7,485.7,328.7,486.6,327.5,486.6z" />
      </g>
      <g>
        <path class="st20" d="M343,479.2c-1.3,0-2.3-1-2.3-2.3v-14.6c0-1.3,1-2.3,2.3-2.3c1.3,0,2.3,1,2.3,2.3v14.6
        C345.3,478.1,344.3,479.2,343,479.2z" />
      </g>
      <g>
        <path class="st20" d="M318.8,484.6c-0.1,0-0.1,0-0.2,0c-1.3-0.1-2.3-1.2-2.2-2.5l1-14.6c0.1-1.3,1.2-2.3,2.5-2.2
        c1.3,0.1,2.3,1.2,2.2,2.5l-1,14.6C321.1,483.7,320,484.6,318.8,484.6z" />
      </g>
      <g>
        <circle class="st3" cx="321.5" cy="465.4" r="6.3" />
        <circle class="st3" cx="334.3" cy="462.2" r="6.3" />
        <circle class="st3" cx="326.6" cy="459.1" r="6.3" />
        <circle class="st3" cx="337.4" cy="454.5" r="6.3" />
        <circle class="st3" cx="346.5" cy="459.1" r="6.3" />
        <circle class="st3" cx="343.1" cy="466.4" r="6.3" />
        <circle class="st3" cx="332.1" cy="469.7" r="6.3" />
      </g>
      <g class="sheepHead">
        <path class="st20" d="M319.1,467.6l-1.8,6.4c-0.5,1.7-2.2,2.6-3.9,2.1l-1.2-0.3c-1.7-0.5-2.6-2.2-2.1-3.9l1.8-6.4
        c0.5-1.7,2.2-2.6,3.9-2.1l1.2,0.3C318.6,464.3,319.6,466,319.1,467.6z" />
        <path class="st20 sheepLeftEar" d="M312.4,464.3l0.3,0.4c0.4,0.6,0.2,1.3-0.3,1.7l-2.9,1.9c-0.6,0.4-1.3,0.2-1.7-0.3l-0.3-0.4
        c-0.4-0.6-0.2-1.3,0.3-1.7l2.9-1.9C311.3,463.6,312.1,463.8,312.4,464.3z" />
        <path class="st20 sheepRightEar" d="M318.6,465.8l0.3-0.4c0.4-0.5,1.2-0.6,1.7-0.2l2.7,2.1c0.5,0.4,0.6,1.2,0.2,1.7l-0.3,0.4
        c-0.4,0.5-1.2,0.6-1.7,0.2l-2.7-2.1C318.3,467.1,318.2,466.3,318.6,465.8z" />
      </g>
    </g>
    <g class="st19">
      <path d="M428,480.3l-3.4-0.9c-5.7-1.5-6.1-9.6-0.7-13.9l1.7-1.3c8.4-6.6,18.6-9.1,27.4-6.8l1.8,0.5c5.7,1.5,6.1,9.6,0.7,13.9
      l-3.2,2.5C444.9,480.1,435.9,482.3,428,480.3z" />
    </g>
    <g>
      <path class="st13" d="M441.3,390.8c-2.3,1.9-3.6,4.6-4.5,7.2c-0.3,0.8-0.5,1.6-0.6,2.5c0,0.8,0.1,1.7,0.7,2.4
      c0.7,1,1.8,1.4,2.6,1.6c4.7,1.4,11.3,0.9,11.8-0.8c0-0.1,0.1-0.6,0.2-1.1c0,0,0.1-0.8,0.2-1.6c0.4-3.9-1-7.6-1-7.6
      c-0.9-2.4-1.8-3-2.1-3.3c-0.5-0.3-1.2-0.5-1.8-0.7c-1.6-0.3-3.3,0-4.7,0.7c-2,1-2.9,2.7-3.2,3.2"
      />
    </g>
    <g>
      <path class="st21" d="M451.5,407.7c0.2-1.5,0.3-4.1-0.8-8.4c-0.8-3.2-0.7-4-1.6-5.7c-0.7-1.2-1.4-2.4-2.8-3.1
      c-0.3-0.1-1.7-0.7-3.1-0.2c-1.3,0.4-1.9,1.5-2.6,2.5c-0.7,1.2-1.1,2.4-1.7,4.9c-0.7,2.7-1.3,5.7-1.4,6.1c-0.3,2-0.4,2.4,0.5,4.1
      c1.7,3.2,7.4,4.8,11.1,2.4C450.6,409.1,451.2,409.6,451.5,407.7z" />
    </g>
    <g>
      <path class="st22" d="M437.7,403.9c-1.4-0.1-2.4,1.2-5.6,5.8c-2.4,3.5-3.6,5.2-4.8,7.3c-2.2,3.8-3.3,5.7-4.4,8.6
      c-0.9,2.2-1.4,4.2-2.5,8.1c-0.7,2.7-1.8,5.2-1.4,5.4c0.2,0.1,0.3,0.7,1.1,0.1c1.3-0.9,2.5-2.1,2.8-2.5c1.8-2.3,6.1-8.8,7.3-11.3
      c1.5-2.9,3.1-5.4,6.3-10.4c2.9-4.5,4.6-7,3.7-9.2C439.9,405,438.9,404,437.7,403.9z"
      />
    </g>
    <g>
      <g>
        <path class="st21" d="M420.7,439.9c1.4-0.3,2-2.3,1.1-3.3c-0.9-1.1-2.8-0.8-3.5,0.4C417.3,438.8,419.3,440.4,420.7,439.9"
        />
      </g>
    </g>
    <g>
      <g>
        <path class="st23" d="M424.9,473.7c-0.7,0-1.2-0.5-1.3-1.2l-7-51.7c-0.2-1.7-1.5-3.1-3.1-3.2c-1.8-0.1-3.4,1.3-3.6,3.1
        c-0.1,0.7-0.7,1.3-1.5,1.2c-0.7-0.1-1.3-0.7-1.2-1.5c0.3-3.3,3.2-5.7,6.4-5.5c2.9,0.2,5.3,2.6,5.6,5.5l7,51.7
        c0.1,0.7-0.4,1.4-1.1,1.5C425,473.7,425,473.7,424.9,473.7z" />
      </g>
    </g>
    <g>
      <path class="st13" d="M446.9,389.4c-2.5,2.9-5.7,5.1-9.2,6.6c0.2-1.9,1.5-3.5,3-4.7c1.7-1.4,3.7-2.5,5.8-2.2"
      />
    </g>
    <g>
      <path class="st24" d="M431.5,434.1c-1.2,6-1.8,10.9-2.2,14.5c-0.4,4.3-0.4,7-0.4,8.8c0,1.5,0.2,3,0.4,6.6c0,0,0,3.1,1.1,7.1
      c0.2,0.7,0.6,2,1.7,2.8c0.3,0.2,1,0.8,2,0.8c1.5,0,2.6-1.3,3-1.7c0.4-0.5,1.1-1.4,1.6-4.6c0.3-1.9,0.2-2.7,0.5-6.4
      c0.1-2.2,0.2-3.4,0.3-4.2c0.5-4,1.4-5.8,1.9-6.6c0.7-1.2,1.4-2.3,2.5-2.5c1.2-0.2,2.3,0.8,2.8,1.3c1.4,1.2,1.8,2.6,2.5,4.4
      c2,4.9,1.9,4.4,2.7,6.9c1.4,4.4,2,6.5,2,6.6c0.4,1.4,0.9,2.3,1.3,2.8c0.2,0.3,1.1,1,2.4,1.1c0.3,0,1.3,0,2.2-0.6
      c1.1-0.8,1.3-2,1.4-3c0.3-1.9-0.2-4.4-0.3-5.2c-0.5-3.3-0.2-1-1.1-7.4c-0.5-4-0.6-3.5-1.7-8.5c-1.2-5.2-1.6-5.6-2.3-7.8
      c-0.3-1.1-0.6-2-1.4-4.1c-0.5-1.3-0.8-2.4-0.9-3.1c-0.7,0.5-1.8,1.3-3.3,1.9c-2.3,0.9-4.4,1.1-9.6,0.9
      C438.2,434.7,435.1,434.5,431.5,434.1z" />
    </g>
    <g>
      <path class="st22" d="M431.3,434.3c0.2-1.2,0.4-3,0.9-5.2c0-0.2,0.1-0.3,0.1-0.3c0.3-1.5,1-5.4,2.3-11.9c0.7-3.5,1.6-8,2.7-13.2
      c0.5,0.1,1.3,0.2,2.3,0.3c1.2,0.1,3,0.3,8.5,0.5c0.8,0,1.8,0.1,3.1,0.1c0.2,0.1,0.6,0.3,0.8,0.6c0.6,0.8,0.5,3.5,0.5,4
      c0.1,1.8,0,2.2,0,3.8c0.1,3.9-0.3,7.1,0.1,11.7c0.1,1.3,0.5,5,0.8,7.3c-2.5,1.6-4.7,2.4-6.3,2.9c-0.8,0.2-4.6,1.3-9.7,0.8
      C434.9,435.4,432.8,434.8,431.3,434.3z" />
    </g>
    <path class="st25 shepherdHat" d="M455.4,388.2c-0.2-0.9-1-0.8-1.6-0.5c-0.9,0.4-1.8,0.8-2.7,1.2c-0.2-1.5-0.7-2.8-1.7-3.8
    c-1.1-1.1-2.8-1.5-4.3-1.4s-3,0.6-4.5,1.1c-0.1,0-0.2,0.1-0.3,0.2c-0.1,0.1-0.1,0.2-0.2,0.4c-0.7,2.1-1.4,4.2-2,6.4
    c-0.9,0-1.9,0-2.8,0c-0.9,0-1.9,0-2.6,1c0.2,0.3,0.3,0.5,0.5,0.8l0.7,0.2c1.2,0.6,2.5,0.5,3.8,0.3c4.7-0.6,9.3-1.1,14-1.7
    c1.5-0.2,3.3-0.7,3.8-3C455.5,388.9,455.5,388.5,455.4,388.2z" />
    <g>
      <path class="st26" d="M436.2,425.6L436.2,425.6c-1.5,0-2.7-1.2-2.7-2.7v-17.9c0-1.5,1.2-2.7,2.7-2.7l0,0c1.5,0,2.7,1.2,2.7,2.7
      v17.9C438.9,424.4,437.7,425.6,436.2,425.6z" />
    </g>
    <g>
      <path class="st26" d="M451.6,425.6L451.6,425.6c-1.5,0-2.7-1.2-2.7-2.7v-17.9c0-1.5,1.2-2.7,2.7-2.7l0,0c1.5,0,2.7,1.2,2.7,2.7
      v17.9C454.3,424.4,453.1,425.6,451.6,425.6z" />
    </g>
    <g>
      <path class="st13" d="M437,399c-0.9,0.7-0.8,2.6,0,3.8c0.8,1.2,2.1,1.5,3.8,1.9c1.7,0.4,3,0.4,4.9,0.3c2.1-0.1,5-0.2,5.6-1.4
      c0.1-0.1,0.2-0.6,0.3-1.2c0-0.1,0.1-0.5,0-1.2c-0.1-1.1-0.1-1.6-0.4-1.9c-0.5-0.5-1.6-0.1-2.8,0.2c-3.4,0.8-7.6-0.1-9.4-0.4
      C438.2,398.8,437.6,398.6,437,399z" />
    </g>
    <g class="shepherdArm">
      <path class="st27" d="M452.6,406.9c3,0.4,5.2,2.8,5.2,5.2c0,3.1-3.5,5.2-6,5.2c-4.5,0-7-6.5-7.4-7.5c-2.4-6.3,0.4-12.3,1.2-13.9"
      />
      <path class="st28" d="M452.6,404.9c3,0.4,5.2,2.8,5.2,5.2c0,3.1-3.5,5.2-6,5.2c-4.5,0-7-6.5-7.4-7.5c-2.4-6.3,0.4-12.3,1.2-13.9"
      />
      <path class="st21" d="M446.6,393.9c-1.4-0.3-2-2.3-1.1-3.3c0.9-1.1,2.8-0.8,3.5,0.4C450,392.8,448,394.4,446.6,393.9"
      />
    </g>
    <path class="st19" d="M453,480.3l-2.5-0.7c-4.3-1.1-4.6-7.2-0.5-10.4l1.3-1c6.3-5,14-6.9,20.6-5.1l1.4,0.4c4.3,1.1,4.6,7.2,0.5,10.4
    l-2.4,1.9C465.7,480.1,458.9,481.8,453,480.3z" />
    <path class="st29 dogtail" d="M465.1,452.6c0.5-0.9,1.9-0.9,2.1-0.9c1.7,0,3.1,1.5,3.9,2.4c1,1.1,1.2,1.8,1.7,1.7c1.1,0,1.4-2.6,2.3-2.6
    c0.8,0,1.7,1.7,1.4,3.2c-0.3,1.8-2.2,2.7-3.5,2.9c-2.1,0.4-3.8-0.8-4.7-1.4C466.4,456.6,464.4,453.9,465.1,452.6z"
    />
    <g>
      <path class="st12" d="M472,471.6c-1.2,0.2-2.3-0.6-2.5-1.8l-2.2-13.2c-0.2-1.2,0.6-2.3,1.8-2.5c1.2-0.2,2.3,0.6,2.5,1.8l2.2,13.2
      C473.9,470.3,473.2,471.4,472,471.6z" />
    </g>
    <g>
      <path class="st12" d="M458.2,477.8c-0.1,0-0.1,0-0.2,0c-1.2-0.1-2.1-1.1-2-2.3l0.9-13.3c0.1-1.2,1.1-2.1,2.3-2
      c1.2,0.1,2.1,1.1,2,2.3l-0.9,13.3C460.3,477,459.4,477.8,458.2,477.8z" />
    </g>
    <g>
      <path class="st12" d="M451.1,475.9c-0.1,0-0.1,0-0.2,0c-1.2-0.1-2.1-1.1-2-2.3l0.9-13.3c0.1-1.2,1.1-2.1,2.3-2
      c1.2,0.1,2.1,1.1,2,2.3l-0.9,13.3C453.2,475.1,452.2,475.9,451.1,475.9z" />
    </g>
    <g>
      <path class="st12" d="M465.7,469c-1.2,0.2-2.3-0.6-2.5-1.8l-2.2-13.2c-0.2-1.2,0.6-2.3,1.8-2.5c1.2-0.2,2.3,0.6,2.5,1.8l2.2,13.2
      C467.7,467.7,466.9,468.8,465.7,469z" />
    </g>
    <path class="st12" d="M467.8,462.4l-9.4,4.5c-3.1,1.5-6.8,0.1-8.2-2.9v0c-1.5-3.1-0.1-6.8,2.9-8.2l9.4-4.5c3.1-1.5,6.8-0.1,8.2,2.9
    v0C472.2,457.2,470.8,460.9,467.8,462.4z" />
    <path class="st30" d="M458,477.9L458,477.9c-1.2-0.1-2-1.1-2-2.3l0.1-1.1l4.3,0.3l-0.1,1.1C460.2,477,459.2,477.9,458,477.9z"
    />
    <path class="st30" d="M448.6,460.6c-0.3,0.5-0.2,1-0.1,1.8c0.2,1,0.6,2.6,1.4,4.4l0.5-0.7l1.9,3.1l0.6-0.7l1.1,1.4l0.9-1.2l1.1,0.3
    l0.5-1.4l0.1-0.9c-1.4-4.4-3.6-7.4-5.6-7.3C450.5,459.2,449.1,459.6,448.6,460.6z"
    />
    <g>
      <path class="st29" d="M443.8,454.2l1.6-1.3c0.9-0.7,2.2-0.1,2.2,1l0.1,2c0.1,1-1,1.8-1.9,1.4l-1.7-0.8
      C443.1,456.2,442.9,454.9,443.8,454.2z" />
      <path class="st12" d="M450.2,460.8L450.2,460.8c-1.5,1.7-4.1,1.8-5.8,0.2v0c-1.7-1.5-1.8-4.1-0.2-5.8v0c1.5-1.7,4.1-1.8,5.8-0.2
      l0,0C451.7,456.5,451.8,459.1,450.2,460.8z" />
      <path class="st12" d="M442.7,458.9c0,0,0,3.7,1,4.2v-0.8c0,0,2,1.7,2,1.5v-0.9l4.6-1.5l-1-4.9"
      />
      <path class="st29" d="M443.6,457.9h0.9c0.3,0,0.6,0.4,0.4,0.7l-0.5,0.9c-0.2,0.3-0.6,0.3-0.8,0l-0.5-0.9
      C443,458.2,443.3,457.9,443.6,457.9z" />
      <path class="st29" d="M450,453.5l1.8,1c1,0.6,0.9,2-0.1,2.4l-1.9,0.9c-0.9,0.4-2-0.3-2-1.3l0.1-1.9
      C447.9,453.5,449.1,452.9,450,453.5z" />
    </g>
    <path class="st30" d="M451,475.9L451,475.9c-1.2-0.1-2-1.1-2-2.3l0.1-1.1l4.3,0.3l-0.1,1.1C453.2,475.1,452.2,476,451,475.9z"
    />
    <path class="st30" d="M472,471.6L472,471.6c-1.2,0.2-2.2-0.6-2.4-1.8l-0.2-1.1l4.2-0.7l0.2,1.1C473.9,470.3,473.1,471.4,472,471.6z"
    />
    <path class="st30" d="M465.7,469L465.7,469c-1.2,0.2-2.2-0.6-2.4-1.8l-0.2-1.1l4.2-0.7l0.2,1.1C467.7,467.7,466.9,468.8,465.7,469z"
    />
    <path class="st31" d="M206.4,418c-9.5,1.7-22.5,3-37.9,1.4c-13.2-1.3-24.2-4.4-32.5-7.3c0.4-4.4,0.7-8.9,1.1-13.3
    c1.5-17.4,16.8-30.4,34.2-28.9l3.1,0.3c19.7,1.7,34.4,19,32.7,38.7L206.4,418z"
    />
    <path class="st32" d="M178.6,414.4c-8.7-0.9-16.5-2.5-23.1-4.4c-5.5-1.5-9.1-6.7-8.6-12.4l0.3-3.9c0.8-9.4,5.6-17.5,12.6-22.7
    c-12.2,3.6-21.5,14.3-22.6,27.7c-0.4,4.4-0.7,8.9-1.1,13.3c8.3,3,19.3,6,32.5,7.3c15.3,1.5,28.4,0.2,37.9-1.4l0.3-3.6
    C198.8,415.2,189.2,415.5,178.6,414.4z" />
    <path class="st31" d="M234.3,420.4c-4.6,0.4-10,0.6-16.1,0.2c-6.9-0.5-13-1.7-17.8-3v0c1.1-13.5,13-23.5,26.5-22.4l1.4,0.1
    c9,0.8,15.7,8.7,14.9,17.7C242.7,417.4,238.8,420.7,234.3,420.4z" />
    <path class="st33" d="M180.9,379.5c1.8,0.5,6.1,1.8,9.9,5.9c3.9,4.2,4.9,8.7,5.2,10.5"
    />
    <line class="st33" x1="232.3" y1="402" x2="232.3" y2="402" />
    <g class="tree">
      <line class="st7" x1="187.2" y1="298" x2="187.2" y2="330" />
      <path class="st8" d="M188.7,309.2L188.7,309.2c-15.1,0-27.3-12.2-27.3-27.3v-48.4c0-15.1,12.2-27.3,27.3-27.3h0
      c15.1,0,27.3,12.2,27.3,27.3v48.4C215.9,297,203.7,309.2,188.7,309.2z" />
      <path class="st9" d="M183.9,215.9c0.9-0.1,11-1.5,17.8,6.9c4.4,5.4,4.8,11.8,4.9,13.8"
      />
      <path class="st31" d="M198.7,304h0.1c-15.1,0-27.1-12-27.1-27.1v-48.4c0-8.7,4-16.4,10.3-21.4c-11.7,3.1-20.3,13.7-20.3,26.4v48.4
      c0,15.1,12.1,27.1,27.1,27.1h-0.1c6.4,0,12.2-2.2,16.9-5.9C203.4,303.7,201,304,198.7,304z"
      />
      <g>
        <path class="st10" d="M168.4,272.5c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M181.7,272.5c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M195.1,272.5c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M175,280.6c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M188.4,280.6c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M167.7,288.6c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M181.7,288.6c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
      </g>
    </g>
    <g class="tree">
      <line class="st7" x1="113.2" y1="415" x2="113.2" y2="448" />
      <path class="st8" d="M115.3,426.1L115.3,426.1c-15.1,0-27.3-12.2-27.3-27.3v-22.3c0-15.1,12.2-27.3,27.3-27.3h0
      c15.1,0,27.3,12.2,27.3,27.3v22.3C142.5,413.9,130.3,426.1,115.3,426.1z" />
      <path class="st9" d="M110.5,359.3c0.9-0.1,11-1.5,17.8,6.9c4.4,5.4,4.8,11.8,4.9,13.8"
      />
      <path class="st31" d="M125.1,421.1c-15.1,0-27.4-12.2-27.4-27.3v-22.3c0-8.7,4-16.4,10.3-21.4c-11.7,3.1-20.3,13.7-20.3,26.4v22.3
      c0,15.1,12.4,27.3,27.4,27.3c6.4,0,12.3-2.2,16.9-5.9C129.8,420.8,127.5,421.1,125.1,421.1z"
      />
      <g>
        <path class="st10" d="M95,389.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M108.3,389.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M121.7,389.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M101.7,397.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M115,397.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M94.3,405.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
        <path class="st10" d="M108.3,405.3c0,0.3,0.2,2,1.6,3.1c1,0.8,2.1,0.8,2.5,0.8c0.4,0,1.3-0.1,2.3-0.8c1.5-1.1,1.6-2.8,1.7-3.1"
        />
      </g>
    </g>
    <g class="grass">
      <path class="st34" d="M504.1,451.1c-0.7-0.7-4.7-4.3-4.4-10c0.1-3.2,1.5-5.5,2.3-6.5c1.7,3.3,3.2,6.7,4.3,10.3
      c0.2-2.8,0.3-5.7,0.5-8.5c0.1-2.8,0.4-5.7,2-7.9c0.6-0.8,1.3-1.4,2.3-1.5c1.1,0,2,0.8,2.6,1.7c1.4,2.1,1.6,4.8,1.8,7.4
      c0.2,2.7,0.3,5.3,0.5,8c0-1.7,0-3.4,0.8-4.8c0.8-1.5,2.6-2.5,4.1-1.8c1.4,0.6,1.7,2.7,1.9,4.8c0.4,4,0.9,8.5-1.8,11.2
      C517.1,457.3,508.7,455.3,504.1,451.1z" />
    </g>
    <g class="grass">
      <path class="st34" d="M193.9,421.1c-1-1-1.7-3.7-3.1-9.1c0-0.2-0.1-0.6,0.1-0.9c0.4-0.6,1.3-0.4,2-0.1c2,1.1,3.8,2.6,5.2,4.4
      c0.7-1.1,0.3-2.5,0.2-3.8c-0.1-1.3,0.6-3,1.9-2.9c1.1,0.1,1.7,1.3,1.9,2.4s0.2,2.3,1,3.1c1.5-1.8,3.4-3.4,5.6-4.5
      c1.2-0.6,3.2-0.9,3.6,0.5c0.2,0.6,0,1.2-0.2,1.5c-3.3,7-2.4,8.5-5,10.3C203.4,424.6,197.3,424.4,193.9,421.1z"
      />
    </g>
    <g class="grass">
      <path class="st35" d="M289.9,548.2c-3.4-3.9-3-9-2.8-10.9c0.2-2.3,0.9-2.6,1.1-2.7c1.3-0.5,2.4,1,3,2.3c0.9,2,2,4,3.2,5.9
      c0.2,0.4,0.6,0.8,1,0.7c0.6-0.1,0.6-0.9,0.4-1.5c-0.5-1.5-1.1-2.9-1.5-4.4c-0.4-1.5-0.4-3.2,0.3-4.5c0.2-0.3,0.4-0.6,0.8-0.8
      c1-0.4,1.9,0.8,2.4,1.8c0.9,2.3,1.7,4.7,2.3,7.1c0.1,0.2,0.1,0.5,0.3,0.7c0.4,0.5,1.2,0.4,1.7-0.1c0.5-0.4,0.7-1,0.9-1.6
      c1-2.2,3-4,5.3-4.6c0.5-0.1,1-0.2,1.4,0c0.3,0.2,0.5,0.7,0.5,1.7c-0.4,10.8-4.1,13.5-4.1,13.5C301.2,554.3,293.7,552.5,289.9,548.2
      z" />
    </g>
    <g class="grass">
      <path class="st35" d="M280.9,449.5c0,0-4.2-2.6-4.7-11.2c-0.1-1.5,0.4-1.8,0.5-1.8c0.6-0.3,1.3,0.2,1.8,0.8
      c1.7,1.9,3.5,3.8,5.2,5.7c0.9-1.6,0.4-3.6,0.2-5.4c-0.2-1.8,0.1-4.1,1.8-4.8c1.4,2.4,2.4,4.9,3,7.6c0.1,0.2,0.1,0.5,0.3,0.7
      c0.5,0.4,1.2-0.3,1.5-0.9c1.2-2.2,2.9-4,5-5.3c0.6-0.4,1.6-0.7,2-0.1c0.2,0.3,0.2,0.7,0.2,0.9c-1.1,9.8-4.4,12.4-4.4,12.4
      C290.5,450.3,285.2,452.1,280.9,449.5z" />
    </g>
    <g class="grass">
      <path class="st35" d="M398.5,501.4c-0.2-0.2-4-3.9-3.6-8.7c0-0.3,0.2-3.5,1.6-3.7c1.2-0.2,2.1,0.9,2.7,1.9c1.3,2,2.6,4,3.8,5.9
      c-0.2-3.2-0.3-6.4-0.5-9.6c0-0.8,0-1.8,0.6-2.3c0.7-0.6,1.8-0.3,2.4,0.4c0.6,0.7,0.8,1.6,1,2.5c0.6,3.1,1.1,6.3,1.5,9.5
      c2-1.6,1.2-4.9,2.7-6.9c0.9-1.1,2.3-1.5,3.6-1.9c0.4-0.1,0.8-0.2,1.2-0.1c0.8,0.2,1.3,1,1.5,1.8c0.5,2-0.3,4-1.7,7.1
      c-2.8,6.3-2.6,6.3-3.1,6.7C408.9,506.7,402.3,505,398.5,501.4z" />
    </g>
    <g class="grass">
      <path class="st34" d="M295.2,456c-1.1-1.1-1.7-2.4-2.4-4.1c-0.5-1.3-0.5-1.8-0.3-2.2c0.4-1.2,2.1-1.4,3.2-0.8
      c1.1,0.7,1.7,1.9,2.2,3c0.8-1.2,1-2.8,1.7-4c0.7-1.3,2.7-2.1,3.6-0.9c1,1.3-0.4,3.5,0.8,4.6c0.7-0.8,1.5-1.7,2.5-2.1
      c1-0.4,2.4-0.3,3,0.6c1,1.3-0.1,3.5-0.3,3.7c-0.6,1-1.4,1.7-2.4,2.2C304.2,457.4,298.5,459.1,295.2,456z"
      />
    </g>
    <g class="grass">
      <path class="st35" d="M296.6,313c-2.3-1.9-2.8-4.8-2.9-5.6c-0.1-0.7-0.2-2,0.3-2.4c1-0.9,2.6,0.3,3.2,1.6c0.6,1.3,1.1,2.9,2.5,3.1
      c-0.5-2.2-0.6-4.5-0.2-6.7c0.2-0.9,0.4-1.8,1-2.5c0.6-0.7,1.7-0.9,2.4-0.4c0.6,0.5,0.8,1.3,0.9,2c0.3,2.1,0.6,4.2,0.9,6.3
      c1.2-1.5,2.8-2.7,4.5-3.4c0.5-0.2,1.3-0.4,1.6,0.1c0.3,0.4,0,1-0.2,1.3c-1.8,3.8-2.6,5.8-3.2,6.2
      C304.7,315.1,299.7,315.5,296.6,313z" />
    </g>
    <g class="grass">
      <path class="st35" d="M153.1,481.3c-1.1-1.1-1.7-2.4-2.4-4.1c-0.5-1.3-0.5-1.8-0.3-2.2c0.4-1.2,2.1-1.4,3.2-0.8
      c1.1,0.7,1.7,1.9,2.2,3c0.8-1.2,1-2.8,1.7-4c0.7-1.3,2.7-2.1,3.6-0.9c1,1.3-0.4,3.5,0.8,4.6c0.7-0.8,1.5-1.7,2.5-2.1
      c1-0.4,2.4-0.3,3,0.6c1,1.3-0.1,3.5-0.3,3.7c-0.6,1-1.4,1.7-2.4,2.2C162.1,482.8,156.4,484.4,153.1,481.3z"
      />
    </g>
    <g class="grass">
      <path class="st34" d="M281.1,550.7c-1.1-1.1-1.7-2.4-2.4-4.1c-0.5-1.3-0.5-1.8-0.3-2.2c0.4-1.2,2.1-1.4,3.2-0.8
      c1.1,0.7,1.7,1.9,2.2,3c0.8-1.2,1-2.8,1.7-4c0.7-1.3,2.7-2.1,3.6-0.9c1,1.3-0.4,3.5,0.8,4.6c0.7-0.8,1.5-1.7,2.5-2.1
      c1-0.4,2.4-0.3,3,0.6c1,1.3-0.1,3.5-0.3,3.7c-0.6,1-1.4,1.7-2.4,2.2C290.2,552.1,284.5,553.8,281.1,550.7z"
      />
    </g>
    <g class="wheel">
      <g>
        <g>
          <path class="st36" d="M431.2,129.8l-106.8,25.1c-5,1.2-10.1-1.6-11.9-6.4v0c-1.7-4.7,0.3-10,4.8-12.4l96.3-51.7
          c5.4-2.9,12-0.4,14.2,5.2l10.5,26.5C440.5,121.9,437.2,128.4,431.2,129.8z" />
        </g>
        <line class="st36" x1="304.5" y1="151.3" x2="433.4" y2="103.7" />
        <line class="st36" x1="404.1" y1="89.5" x2="420.9" y2="132.2" />
        <line class="st36" x1="366.5" y1="109.7" x2="379.3" y2="142" />
        <line class="st36" x1="334" y1="127.1" x2="343.2" y2="150.4" />
      </g>
      <g>
        <g>
          <path class="st36" d="M326.2,277.5l-25.1-106.8c-1.2-5,1.6-10.1,6.4-11.9l0,0c4.7-1.7,10,0.3,12.4,4.8l51.7,96.3
          c2.9,5.4,0.4,12-5.2,14.2l-26.5,10.5C334.1,286.9,327.7,283.5,326.2,277.5z" />
        </g>
        <line class="st36" x1="304.7" y1="150.9" x2="352.3" y2="279.7" />
        <line class="st36" x1="355.8" y1="231.5" x2="318.8" y2="246.1" />
        <line class="st36" x1="337.4" y1="196.2" x2="309.7" y2="207.1" />
        <line class="st36" x1="321.5" y1="166.5" x2="302.1" y2="174.1" />
      </g>
      <g>
        <g>
          <path class="st36" d="M178.6,172.6l106.8-25.1c5-1.2,10.1,1.6,11.9,6.4v0c1.7,4.7-0.3,10-4.8,12.4l-96.3,51.7
          c-5.4,2.9-12,0.4-14.2-5.2l-10.5-26.5C169.2,180.4,172.6,174,178.6,172.6z" />
        </g>
        <line class="st36" x1="305.3" y1="151" x2="176.4" y2="198.6" />
        <line class="st36" x1="205.7" y1="212.9" x2="188.9" y2="170.2" />
        <line class="st36" x1="243.2" y1="192.7" x2="230.5" y2="160.4" />
        <line class="st36" x1="275.7" y1="175.3" x2="266.6" y2="152" />
      </g>
      <g>
        <g>
          <path class="st36" d="M283.5,24.8l25.1,106.8c1.2,5-1.6,10.1-6.4,11.9l0,0c-4.7,1.7-10-0.3-12.4-4.8l-51.7-96.3
          c-2.9-5.4-0.4-12,5.2-14.2l26.5-10.5C275.7,15.4,282.1,18.8,283.5,24.8z" />
        </g>
        <line class="st36" x1="305.1" y1="151.5" x2="257.5" y2="22.6" />
        <line class="st36" x1="254" y1="70.9" x2="290.9" y2="56.3" />
        <line class="st36" x1="272.4" y1="106.2" x2="300.1" y2="95.2" />
        <line class="st36" x1="288.3" y1="135.9" x2="307.7" y2="128.2" />
      </g>
    </g>
    <path class="st37" d="M305,160.1L305,160.1c-5,0-9.1-4.1-9.1-9.1v0c0-5,4.1-9.1,9.1-9.1h0c5,0,9.1,4.1,9.1,9.1v0
    C314.1,156.1,310,160.1,305,160.1z" />
    <g class="st38 cloud">
      <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="364.4083"
                      y1="99.2384" x2="427.7651" y2="99.2384" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st39" cx="374.9" cy="108.7" r="31.7" />
      <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="323.0636"
                      y1="119.1571" x2="386.4205" y2="119.1571" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st40" cx="329.4" cy="114.7" r="31.7" />
      <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="304.3444"
                      y1="143.4327" x2="367.7013" y2="143.4327" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st41" cx="304" cy="131.9" r="31.7" />
      <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="346.7189"
                      y1="175.1111" x2="410.0758" y2="175.1111" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st42" cx="334.3" cy="175.2" r="31.7" />
      <linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="402.3456"
                      y1="144.5662" x2="465.7025" y2="144.5662" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st43" cx="396.7" cy="163.6" r="31.7" />
      <linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="411.4306"
                      y1="111.7543" x2="474.7875" y2="111.7543" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st44" cx="415.6" cy="135.3" r="31.7" />
      <linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="364.4083"
                      y1="137.0076" x2="427.7651" y2="137.0076" gradientTransform="matrix(0.9498 0.313 -0.313 0.9498 29.735 -109.4923)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st45" cx="363" cy="144.6" r="31.7" />
    </g>
    <g class="st38 cloud">
      <linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="149.0451"
                      y1="154.6615" x2="186.0231" y2="154.6615" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st46" cx="211.3" cy="74.1" r="18.5" />
      <linearGradient id="SVGID_9_" gradientUnits="userSpaceOnUse" x1="124.9145"
                      y1="166.287" x2="161.8924" y2="166.287" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st47" cx="185.9" cy="82.7" r="18.5" />
      <linearGradient id="SVGID_10_" gradientUnits="userSpaceOnUse" x1="113.9891"
                      y1="180.4553" x2="150.9671" y2="180.4553" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st48" cx="173.3" cy="95.4" r="18.5" />
      <linearGradient id="SVGID_11_" gradientUnits="userSpaceOnUse" x1="138.7208"
                      y1="198.9443" x2="175.6988" y2="198.9443" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st49" cx="195.6" cy="116.8" r="18.5" />
      <linearGradient id="SVGID_12_" gradientUnits="userSpaceOnUse" x1="171.187"
                      y1="181.1169" x2="208.165" y2="181.1169" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st50" cx="230" cy="103.1" r="18.5" />
      <linearGradient id="SVGID_13_" gradientUnits="userSpaceOnUse" x1="176.4895"
                      y1="161.9664" x2="213.4675" y2="161.9664" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st51" cx="237.6" cy="84.8" r="18.5" />
      <linearGradient id="SVGID_14_" gradientUnits="userSpaceOnUse" x1="149.0451"
                      y1="176.7054" x2="186.0231" y2="176.7054" gradientTransform="matrix(0.9924 0.1234 -0.1234 0.9924 64.1029 -100.0347)">
        <stop offset="0" style="stop-color:#FFFFFF" />
        <stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0.6" />
      </linearGradient>
      <circle class="st52" cx="208.5" cy="96" r="18.5" />
    </g>
  </svg>
</div>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script>
<script>
    ////Naming elements
    //landscape
    var wheel = document.getElementsByClassName("wheel");
    var cloud = document.getElementsByClassName("cloud");
    var tree = document.getElementsByClassName("tree");
    var grass = document.getElementsByClassName("grass");

    //shepherd
    var shepherdhat = document.getElementsByClassName("shepherdHat");
    var shepherdarm = document.getElementsByClassName("shepherdArm");
    var dogtail = document.getElementsByClassName("dogtail");

    //sheep
    var sheephead = document.getElementsByClassName("sheepHead");
    var sheepears = document.getElementsByClassName("sheepEars");
    var sheepleftear = document.getElementsByClassName("sheepLeftEar");
    var sheeprightear = document.getElementsByClassName("sheepRightEar");
    var sheeprightear2 = document.getElementsByClassName("sheepRightEar2");
    var sheepleftear2 = document.getElementsByClassName("sheepLeftEar2");

    //// Animation
    //wheel
    var tlwheel = new TimelineMax({
        repeat: -1,
    });
    tlwheel.to(wheel, 18, {
        transformOrigin: "50% 50%",
        rotation: "360deg",
        ease: "linear"
    })

    //cloud
    var tlcloud = new TimelineMax();
    tlcloud.staggerFromTo(cloud, 4.5, {
            y: -45,
            ease: "linear"
        },
        {
            y: 0,
            ease: "linear",
            repeat: -1,
            yoyo: true
        },
        3);

    //Grass
    var tlgrass = new TimelineMax();
    tlgrass.staggerFromTo(grass, 2, {
            transformOrigin: "0% 100%",
            skewX: "10deg"
        },
        {
            skewX: "-10deg",
            repeat: -1,
            yoyo: true
        },
        0.3);

    //Tree
    var tltree = new TimelineMax();
    tltree.staggerFromTo(tree, 2, {
            transformOrigin: "0% 100%",
            skewX: "1.5deg",
        },
        {
            skewX: "-1.5deg",
            repeat: -1,
            yoyo: true,
        },
        1);

    //Shepherd
    var tlhat = new TimelineMax({
        repeat: -1,
        yoyo: true,
        repeatDelay: 1.5
    });
    tlhat.to(shepherdhat, .8, {
        transformOrigin: "75% 0%",
        rotation: "-4deg",
        y: 1.3,
        ease: "linear"
    }).to(shepherdhat, 1.5, {
            rotation: "0deg",
            y: 0
        },
        1)

    var tlshepherd = new TimelineMax({
        repeat: -1,
        yoyo: true,
        repeatDelay: 1.5,
    });
    tlshepherd.to(shepherdarm, .8, {
        transformOrigin: "80% 50%",
        rotation: "-25deg",
        ease: "linear"
    }).to(shepherdarm, 1.5, {
            rotation: "0deg"
        },
        1)

    //Dog Tail
    var tldogtail = new TimelineMax({
        repeat: -1,
    });
    tldogtail.to(dogtail, .3, {
        transformOrigin: "0% 50%",
        rotation: "6deg"
    }).to(dogtail, .3, {
        rotation: "0deg"
    })

    //// Sheep
    //Sheep Head
    var tlsheephead = new TimelineMax();
    tlsheephead.staggerFromTo(sheephead, .7, {
            y: 0
        },
        {
            y: 7,
            ease: "linear",
            repeat: -1,
            yoyo: true,
            repeatDelay: 4
        },
        3);

    //Sheep Ears
    var tlsheepleftear = new TimelineMax({
        repeat: -1,
        repeatDelay: 3.3,
    });
    tlsheepleftear.to(sheepleftear, .3, {
            transformOrigin: "100% 20%",
            rotation: "50deg",
        },
        0).to(sheepleftear, .2, {
        rotation: "0deg",
    }).to(sheepleftear, .1, {
        rotation: "50deg",
    }).to(sheepleftear, .1, {
        rotation: "0deg",
    }).to(sheepleftear, .1, {
        rotation: "50deg",
    }).to(sheepleftear, .1, {
        rotation: "0deg",
    }).to(sheepleftear, .1, {
        rotation: "0deg",
    }).to(sheepleftear, .1, {
        rotation: "50deg",
    }).to(sheepleftear, .1, {
        rotation: "0deg",
    }).to(sheepleftear, .1, {
        rotation: "50deg",
    }).to(sheepleftear, .1, {
        rotation: "0deg",
    }).to(sheepleftear, .1, {
            rotation: "50deg",
        },
        1).to(sheepleftear, .1, {
        rotation: "0deg",
    })
    //right
    var tlsheeprightear = new TimelineMax({
        repeat: -1,
        repeatDelay: 3.1,
    });
    tlsheeprightear.to(sheeprightear, .3, {
            transformOrigin: "0% 20%",
            rotation: "-50deg",
        },
        0.2).to(sheeprightear, .2, {
        rotation: "0deg",
    }).to(sheeprightear, .1, {
        rotation: "-50deg",
    }).to(sheeprightear, .1, {
        rotation: "0deg",
    }).to(sheeprightear, .1, {
        rotation: "-50deg",
    }).to(sheeprightear, .1, {
        rotation: "0deg",
    }).to(sheeprightear, .1, {
        rotation: "0deg",
    }).to(sheeprightear, .1, {
        rotation: "-50deg",
    }).to(sheeprightear, .1, {
        rotation: "0deg",
    }).to(sheeprightear, .1, {
        rotation: "-50deg",
    }).to(sheeprightear, .1, {
        rotation: "0deg",
    }).to(sheeprightear, .1, {
            rotation: "-50deg",
        },
        1).to(sheeprightear, .1, {
        rotation: "0deg",
    })

    // Delayed Ears
    var tlsheepleftear2 = new TimelineMax({
        repeat: -1,
        repeatDelay: 3.3,
        delay: 3
    });
    tlsheepleftear2.to(sheepleftear2, .3, {
            transformOrigin: "100% 20%",
            rotation: "50deg",
        },
        0).to(sheepleftear2, .2, {
        rotation: "0deg",
    }).to(sheepleftear2, .1, {
        rotation: "50deg",
    }).to(sheepleftear2, .1, {
        rotation: "0deg",
    }).to(sheepleftear2, .1, {
        rotation: "50deg",
    }).to(sheepleftear2, .1, {
        rotation: "0deg",
    }).to(sheepleftear2, .1, {
        rotation: "0deg",
    }).to(sheepleftear2, .1, {
        rotation: "50deg",
    }).to(sheepleftear2, .1, {
        rotation: "0deg",
    }).to(sheepleftear2, .1, {
        rotation: "50deg",
    }).to(sheepleftear2, .1, {
        rotation: "0deg",
    }).to(sheepleftear2, .1, {
            rotation: "50deg",
        },
        1).to(sheepleftear2, .1, {
        rotation: "0deg",
    })
    //right
    var tlsheeprightear2 = new TimelineMax({
        repeat: -1,
        repeatDelay: 3.1,
        delay: 3
    });
    tlsheeprightear2.to(sheeprightear2, .3, {
            transformOrigin: "0% 20%",
            rotation: "-50deg",
        },
        0.2).to(sheeprightear2, .2, {
        rotation: "0deg",
    }).to(sheeprightear2, .1, {
        rotation: "-50deg",
    }).to(sheeprightear2, .1, {
        rotation: "0deg",
    }).to(sheeprightear2, .1, {
        rotation: "-50deg",
    }).to(sheeprightear2, .1, {
        rotation: "0deg",
    }).to(sheeprightear2, .1, {
        rotation: "0deg",
    }).to(sheeprightear2, .1, {
        rotation: "-50deg",
    }).to(sheeprightear2, .1, {
        rotation: "0deg",
    }).to(sheeprightear2, .1, {
        rotation: "-50deg",
    }).to(sheeprightear2, .1, {
        rotation: "0deg",
    }).to(sheeprightear2, .1, {
            rotation: "-50deg",
        },
        1).to(sheeprightear2, .1, {
        rotation: "0deg",
    })

</script>

<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.svg);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;梦醒花开知多少
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('HItjVLlERF4Y44n2cVDAWfxG-gzGzoHsz', 'sWXxXtHuGSEbId2dNbxEgcue');
    </script>
    <script>
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>




    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>










<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

                </main>
            </div>
            <script src="/js/header.js"></script>
        </body>
    
</html>
